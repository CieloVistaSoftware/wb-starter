{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "search-index.schema.json",
  "title": "Search Index",
  "description": "Client-side search index for WB Behaviors sites. Generated by scripts/generate-search-index.js",
  "schemaFor": "search-index",
  "type": "object",
  "compliance": {
    "baseClass": "wb-search-index",
    "supportLevel": "stable",
    "accessibility": "high"
  },
  "properties": {
    "$generated": {
      "type": "string",
      "format": "date-time",
      "description": "ISO timestamp when index was generated",
      "default": ""
    },
    "$version": {
      "type": "string",
      "description": "Schema version for cache busting",
      "default": ""
    },
    "$stats": {
      "type": "object",
      "description": "Index statistics",
      "properties": {
        "totalDocuments": {
          "type": "integer"
        },
        "totalWords": {
          "type": "integer"
        },
        "sources": {
          "type": "object",
          "additionalProperties": {
            "type": "integer"
          },
          "description": "Document count per source folder"
        }
      },
      "default": {}
    },
    "documents": {
      "type": "array",
      "description": "Searchable documents",
      "items": {
        "$ref": "#/$defs/SearchDocument"
      },
      "default": []
    },
    "index": {
      "type": "object",
      "description": "Inverted index: word -> document IDs",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "default": {}
    }
  },
  "required": [
    "$generated",
    "$version",
    "documents"
  ],
  "$defs": {
    "SearchDocument": {
      "type": "object",
      "description": "A single searchable document/page",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique document ID (e.g., 'pages/home', 'docs/getting-started')"
        },
        "url": {
          "type": "string",
          "description": "URL path to the document (e.g., '?page=home', '/docs/getting-started.html')"
        },
        "title": {
          "type": "string",
          "description": "Page title from <title> or first <h1>"
        },
        "description": {
          "type": "string",
          "description": "Meta description or first paragraph"
        },
        "headings": {
          "type": "array",
          "description": "All h1-h3 headings for section jumping",
          "items": {
            "type": "object",
            "properties": {
              "level": {
                "type": "integer",
                "minimum": 1,
                "maximum": 6
              },
              "text": {
                "type": "string"
              },
              "id": {
                "type": "string",
                "description": "Anchor ID if present"
              }
            },
            "required": [
              "level",
              "text"
            ]
          }
        },
        "content": {
          "type": "string",
          "description": "Plain text content (HTML stripped, normalized)"
        },
        "keywords": {
          "type": "array",
          "description": "Extracted keywords for boosted matching",
          "items": {
            "type": "string"
          }
        },
        "type": {
          "type": "string",
          "enum": [
            "page",
            "doc",
            "demo",
            "component",
            "api"
          ],
          "description": "Document type for filtering/icons"
        },
        "category": {
          "type": "string",
          "description": "Category for grouping results (e.g., 'Components', 'Guides')"
        },
        "modified": {
          "type": "string",
          "format": "date-time",
          "description": "Last modified date for freshness sorting"
        },
        "boost": {
          "type": "number",
          "default": 1,
          "description": "Relevance boost factor (higher = more important)"
        }
      },
      "required": [
        "id",
        "url",
        "title",
        "content",
        "type"
      ]
    }
  },
  "examples": [
    {
      "$generated": "2026-01-05T22:00:00.000Z",
      "$version": "1.0.0",
      "$stats": {
        "totalDocuments": 42,
        "totalWords": 15420,
        "sources": {
          "pages": 12,
          "docs": 25,
          "demos": 5
        }
      },
      "documents": [
        {
          "id": "pages/home",
          "url": "?page=home",
          "title": "Home",
          "description": "Welcome to the WB Behaviors",
          "headings": [
            {
              "level": 1,
              "text": "Welcome to WB Behaviors"
            },
            {
              "level": 2,
              "text": "Getting Started",
              "id": "getting-started"
            }
          ],
          "content": "Welcome to the WB Behaviors. A modern component library...",
          "keywords": [
            "home",
            "welcome",
            "framework",
            "components"
          ],
          "type": "page",
          "category": "Main",
          "boost": 2
        },
        {
          "id": "docs/components/card",
          "url": "/docs/components/card.html",
          "title": "Card Component",
          "description": "Versatile container for content display",
          "headings": [
            {
              "level": 1,
              "text": "Card Component"
            },
            {
              "level": 2,
              "text": "Variants",
              "id": "variants"
            },
            {
              "level": 2,
              "text": "Properties",
              "id": "properties"
            }
          ],
          "content": "The card component is a versatile container...",
          "keywords": [
            "card",
            "container",
            "component",
            "layout"
          ],
          "type": "component",
          "category": "Components",
          "boost": 1.5
        }
      ],
      "index": {
        "card": [
          "docs/components/card",
          "pages/components"
        ],
        "welcome": [
          "pages/home"
        ],
        "framework": [
          "pages/home",
          "docs/getting-started"
        ]
      }
    }
  ],
  "$view": [],
  "$methods": {},
  "$cssAPI": {}
}
