{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "cardproduct.schema.json",
  "title": "Product Card",
  "description": "E-commerce product card with image, price, rating, and CTA",
  
  "behavior": "cardproduct",
  "baseClass": "wb-product",
  
  "semanticElement": {
    "tagName": "article",
    "implicitRole": "article"
  },
  
  "properties": {
    "image": {
      "type": "string",
      "description": "Product image URL"
    },
    "title": {
      "type": "string",
      "description": "Product name",
      "required": true
    },
    "description": {
      "type": "string",
      "description": "Product description"
    },
    "price": {
      "type": "string",
      "description": "Current price",
      "required": true
    },
    "originalPrice": {
      "type": "string",
      "description": "Original price (shows discount)"
    },
    "badge": {
      "type": "string",
      "description": "Badge text (Sale, New, etc.)"
    },
    "rating": {
      "type": "number",
      "description": "Product rating (0-5)"
    },
    "reviews": {
      "type": "number",
      "description": "Number of reviews"
    },
    "cta": {
      "type": "string",
      "description": "CTA button text",
      "default": "Add to Cart"
    },
    "featured": {
      "type": "boolean",
      "description": "Highlight as featured",
      "default": false,
      "appliesClass": "wb-product--featured"
    },
    "variant": {
      "type": "string",
      "description": "Visual style variant",
      "enum": ["default", "compact", "horizontal", "minimal"],
      "default": "default",
      "appliesClass": "wb-product--{{value}}"
    }
  },
  
  "$view": [
    {
      "name": "figure",
      "tag": "figure",
      "public": true,
      "createdWhen": "image",
      "description": "Product image container"
    },
    {
      "name": "image",
      "tag": "img",
      "parent": "figure",
      "public": true,
      "createdWhen": "image",
      "description": "Product image"
    },
    {
      "name": "badge",
      "tag": "span",
      "parent": "figure",
      "public": true,
      "content": "{{badge}}",
      "createdWhen": "badge",
      "description": "Product badge"
    },
    {
      "name": "content",
      "tag": "div",
      "public": true,
      "required": true,
      "description": "Product info container"
    },
    {
      "name": "title",
      "tag": "h3",
      "parent": "content",
      "public": true,
      "content": "{{title}}",
      "description": "Product name"
    },
    {
      "name": "description",
      "tag": "p",
      "parent": "content",
      "public": true,
      "content": "{{description}}",
      "createdWhen": "description",
      "description": "Product description"
    },
    {
      "name": "rating-wrapper",
      "tag": "div",
      "parent": "content",
      "public": true,
      "createdWhen": "rating",
      "description": "Rating container"
    },
    {
      "name": "price-wrapper",
      "tag": "div",
      "parent": "content",
      "public": false,
      "required": true,
      "description": "Price container"
    },
    {
      "name": "price",
      "tag": "data",
      "parent": "price-wrapper",
      "public": true,
      "content": "{{price}}",
      "description": "Current price (semantic data element)"
    },
    {
      "name": "original-price",
      "tag": "data",
      "parent": "price-wrapper",
      "public": true,
      "content": "{{originalPrice}}",
      "createdWhen": "originalPrice",
      "description": "Original price (strikethrough)"
    },
    {
      "name": "footer",
      "tag": "footer",
      "public": true,
      "required": true,
      "description": "CTA container"
    },
    {
      "name": "cta",
      "tag": "button",
      "parent": "footer",
      "public": true,
      "content": "{{cta}}",
      "description": "Add to cart button"
    }
  ],
  
  "$methods": {
    "show": { "description": "Shows the card", "params": [] },
    "hide": { "description": "Hides the card", "params": [] },
    "toggle": { "description": "Toggles visibility", "params": [] },
    "addToCart": { "description": "Triggers add to cart action", "params": [] },
    "updatePrice": { "description": "Updates the price", "params": ["price", "originalPrice"] },
    "setBadge": { "description": "Sets the badge text", "params": ["text"] }
  },
  
  "$cssAPI": {
    "--wb-product-radius": { "default": "8px", "description": "Card border radius" },
    "--wb-product-bg": { "default": "var(--bg-surface, #ffffff)", "description": "Card background" },
    "--wb-product-border": { "default": "1px solid var(--border-color, #e0e0e0)", "description": "Card border" },
    "--wb-product-shadow": { "default": "none", "description": "Card shadow" },
    "--wb-product-padding": { "default": "1rem", "description": "Content padding" },
    "--wb-product-gap": { "default": "0.75rem", "description": "Gap between elements" },
    "--wb-product-image-aspect": { "default": "4/3", "description": "Image aspect ratio" },
    "--wb-product-image-radius": { "default": "8px 8px 0 0", "description": "Image border radius" },
    "--wb-product-title-size": { "default": "1rem", "description": "Title font size" },
    "--wb-product-title-weight": { "default": "600", "description": "Title font weight" },
    "--wb-product-description-size": { "default": "0.875rem", "description": "Description font size" },
    "--wb-product-description-color": { "default": "var(--text-secondary, #666)", "description": "Description color" },
    "--wb-product-price-size": { "default": "1.25rem", "description": "Price font size" },
    "--wb-product-price-weight": { "default": "700", "description": "Price font weight" },
    "--wb-product-price-color": { "default": "var(--text-primary, #1a1a1a)", "description": "Price color" },
    "--wb-product-original-price-color": { "default": "var(--text-tertiary, #999)", "description": "Original price color" },
    "--wb-product-badge-bg": { "default": "var(--error, #ef4444)", "description": "Badge background" },
    "--wb-product-badge-color": { "default": "#ffffff", "description": "Badge text color" },
    "--wb-product-rating-color": { "default": "var(--warning, #ffc107)", "description": "Rating star color" },
    "--wb-product-cta-bg": { "default": "var(--primary, #6366f1)", "description": "CTA button background" },
    "--wb-product-cta-color": { "default": "#ffffff", "description": "CTA button text color" }
  },
  
  "events": {
    "wb:product:addtocart": {
      "description": "Fired when add to cart is clicked",
      "detail": { "title": "string", "price": "string" }
    }
  },
  
  "test": {
    "setup": [
      "<wb-product title=\"Widget\" price=\"$29\"></wb-product>",
      "<wb-product image=\"product.jpg\" title=\"Widget\" price=\"$19\" badge=\"Sale\"></wb-product>",
      "<article data-wb=\"cardproduct\" data-title=\"Test\" data-price=\"$10\"></article>"
    ],
    "matrix": {
      "combinations": [
        { "title": "Product", "price": "$29" },
        { "title": "Product", "price": "$29", "originalPrice": "$49" },
        { "image": "product.jpg", "title": "Product", "price": "$29" },
        { "title": "Product", "price": "$29", "rating": 4.5, "reviews": 128 },
        { "title": "Product", "price": "$29", "badge": "Sale", "featured": true }
      ]
    }
  },
  
  "_metadata": {
    "category": "cards",
    "icon": "ðŸ›’",
    "since": "1.0.0",
    "status": "stable"
  }
}
