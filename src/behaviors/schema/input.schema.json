{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Input",
  "description": "Text input field with variant styling for success/error states",
  "behavior": "input",
  "element": "input",
  
  "properties": {
    "variant": {
      "type": "string",
      "description": "Visual variant for validation state",
      "enum": ["default", "success", "error"],
      "default": "default",
      "permutations": {
        "type": "ALL_ENUM",
        "assertions": {
          "default": {
            "selector": "element",
            "checks": { "hasClass": "wb-input" }
          },
          "success": {
            "selector": "element",
            "checks": { "hasClass": "wb-input--success" }
          },
          "error": {
            "selector": "element",
            "checks": { "hasClass": "wb-input--error" }
          }
        }
      }
    },
    "disabled": {
      "type": "boolean",
      "description": "Whether the input is disabled",
      "default": false,
      "permutations": {
        "type": "BOOLEAN",
        "assertions": {
          "true": {
            "selector": "element",
            "checks": { "attribute": { "disabled": "" } }
          }
        }
      }
    }
  },
  
  "compliance": {
    "baseClass": "wb-input",
    "requiredChildren": {},
    "styles": {
      "padding": {
        "required": true
      },
      "borderRadius": {
        "required": true
      },
      "border": {
        "required": true,
        "pattern": "solid"
      }
    }
  },
  
  "interactions": {
    "elements": {
      "element": {
        "type": "input",
        "clickable": true,
        "click": {
          "action": "focus input field",
          "event": "focus"
        },
        "focus": {
          "style": { "outline": "2px solid var(--primary)" },
          "visible": true
        }
      }
    },
    "keyboard": {
      "Tab": {
        "target": "element",
        "action": "focus"
      }
    }
  },
  
  "accessibility": {
    "element": {
      "description": "Input should be focusable and announce its purpose"
    }
  },
  
  "events": {
    "input": {
      "trigger": "User types in the input",
      "detail": {},
      "bubbles": true
    },
    "focus": {
      "trigger": "Input receives focus",
      "detail": {},
      "bubbles": true
    },
    "blur": {
      "trigger": "Input loses focus",
      "detail": {},
      "bubbles": true
    }
  },
  
  "test": {
    "setup": [
      "<input data-wb=\"input\" placeholder=\"Enter text\">",
      "<input data-wb=\"input\" data-variant=\"success\" placeholder=\"Valid\">",
      "<input data-wb=\"input\" data-variant=\"error\" placeholder=\"Invalid\">",
      "<input data-wb=\"input\" disabled placeholder=\"Disabled\">"
    ],
    
    "matrix": {
      "combinations": [
        {},
        { "variant": "default" },
        { "variant": "success" },
        { "variant": "error" },
        { "disabled": true },
        { "variant": "success", "disabled": true }
      ]
    },
    
    "functional": {
      "buttons": [],
      
      "interactions": [
        {
          "name": "input is focusable",
          "setup": "<input data-wb=\"input\" placeholder=\"Test\">",
          "action": "click",
          "expect": {}
        }
      ],
      
      "keyboard": [
        {
          "name": "Tab focuses input",
          "setup": "<input data-wb=\"input\" placeholder=\"Test\">",
          "key": "Tab",
          "expect": {}
        }
      ],
      
      "visual": [
        {
          "name": "input has base styling",
          "setup": "<input data-wb=\"input\" placeholder=\"Test\">",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-input"]
          }
        },
        {
          "name": "success variant has success class",
          "setup": "<input data-wb=\"input\" data-variant=\"success\">",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-input", "wb-input--success"]
          }
        },
        {
          "name": "error variant has error class",
          "setup": "<input data-wb=\"input\" data-variant=\"error\">",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-input", "wb-input--error"]
          }
        }
      ]
    }
  }
}
