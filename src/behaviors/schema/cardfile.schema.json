{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Card File",
  "description": "File display card. INHERITS from card.base (IS-A card), CONTAINS file info (HAS-A icon, filename, meta, download).",
  "behavior": "cardfile",
  
  "$extends": "card.base.schema.json",
  "$inheritance": {
    "type": "IS-A",
    "parent": "card",
    "inherits": ["semantic.element", "semantic.structure", "compliance.containerTag", "accessibility"]
  },
  
  "$containment": [
    {
      "type": "HAS-A",
      "name": "fileIcon",
      "element": "HEADER",
      "description": "File type icon in header"
    },
    {
      "type": "HAS-A",
      "name": "fileInfo",
      "element": "MAIN",
      "description": "Filename and metadata"
    },
    {
      "type": "HAS-A",
      "name": "download",
      "element": "FOOTER > A",
      "description": "Download link"
    }
  ],
  
  "properties": {
    "$inherited": ["elevated"],
    
    "filename": {
      "type": "string",
      "description": "Name of the file",
      "mapsTo": "main"
    },
    "type": {
      "type": "string",
      "description": "File type for icon selection",
      "enum": ["pdf", "doc", "image", "video", "audio", "zip", "file"],
      "default": "file",
      "mapsTo": "header"
    },
    "size": {
      "type": "string",
      "description": "File size (e.g., 2.4 MB)",
      "mapsTo": "main"
    },
    "date": {
      "type": "string",
      "description": "File date",
      "mapsTo": "main"
    },
    "downloadable": {
      "type": "boolean",
      "description": "Show download link",
      "default": true
    },
    "href": {
      "type": "string",
      "description": "Download URL",
      "mapsTo": "footer"
    }
  },
  
  "compliance": {
    "$inherits": "card.base.schema.json#compliance",
    "baseClass": "wb-card",
    "additionalClasses": ["wb-card--file"],
    "containedElements": {
      "header.wb-card__file-icon": {
        "description": "File type icon",
        "tagName": "HEADER",
        "relationship": "HAS-A"
      },
      "main.wb-card__file-info": {
        "description": "File information",
        "tagName": "MAIN",
        "relationship": "HAS-A"
      },
      "footer a.wb-card__file-download": {
        "description": "Download link",
        "tagName": "A",
        "relationship": "HAS-A"
      }
    }
  },
  
  "interactions": {
    "elements": {
      "a.wb-card__file-download": {
        "type": "link",
        "clickable": true,
        "click": {
          "action": "Download file"
        }
      }
    }
  },
  
  "accessibility": {
    "$inherits": "card.base.schema.json#accessibility",
    "download": {
      "ariaLabel": "Download {filename}"
    }
  },
  
  "test": {
    "setup": [
      "<article data-wb=\"cardfile\" data-filename=\"report.pdf\" data-type=\"pdf\"></article>",
      "<article data-wb=\"cardfile\" data-filename=\"photo.jpg\" data-type=\"image\" data-size=\"2.4 MB\" data-href=\"/files/photo.jpg\"></article>"
    ],
    "matrix": {
      "combinations": [
        { "filename": "document.pdf" },
        { "filename": "document.pdf", "type": "pdf" },
        { "filename": "document.pdf", "size": "1.2 MB" },
        { "filename": "document.pdf", "size": "1.2 MB", "date": "Dec 15, 2024" },
        { "filename": "document.pdf", "href": "/files/doc.pdf", "downloadable": true }
      ]
    },
    "functional": {
      "semantic": [
        {
          "name": "Container should be ARTICLE (inherited)",
          "setup": "<article data-wb=\"cardfile\" data-filename=\"test.pdf\"></article>",
          "expect": { "selector": "element", "tagName": "ARTICLE" }
        },
        {
          "name": "Icon should be in HEADER (HAS-A)",
          "setup": "<article data-wb=\"cardfile\" data-filename=\"test.pdf\"></article>",
          "expect": { "selector": "header.wb-card__header", "tagName": "HEADER" }
        }
      ]
    }
  }
}
