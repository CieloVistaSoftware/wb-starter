{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "behavior": "builder",
  "title": "Builder Schema",
  "description": "Unified schema for builder components. Each component type is referenced by its own schema.",
  "type": "object",
  "properties": {
    "components": {
      "type": "array",
      "description": "List of components in the builder.",
      "items": {
        "type": "object",
        "properties": {
          "type": { "type": "string", "description": "Component type (e.g., 'card', 'button', etc.)" },
          "id": { "type": "string", "description": "Unique component ID." },
          "props": { "type": "object", "description": "Component properties (see individual schemas)." },
          "children": { "$ref": "#/properties/components" }
        },
        "required": ["type", "id", "props"],
        "additionalProperties": false
      }
    },
    "meta": {
      "type": "object",
      "description": "Builder-level metadata (optional)",
      "properties": {
        "version": { "type": "string" },
        "created": { "type": "string", "format": "date-time" },
        "author": { "type": "string" }
      },
      "additionalProperties": true
    }
  },
  "required": ["components"],
  "additionalProperties": false
  ,
  "compliance": {
    "css": "Uses only CSS variables for colors, minimal !important usage",
    "schema": "Includes required fields and structure for builder components",
    "baseClass": "wb-builder"
  },
  "test": {
    "setup": [
      "<div data-wb=\"builder\">Builder Test</div>"
    ],
    "matrix": {
      "combinations": [
        { "components": [{ "type": "card", "id": "test1", "props": {} }] },
        { "components": [{ "type": "button", "id": "test2", "props": {} }] }
      ]
    }
  },
  "api": {
    "description": "Global builder API exposed as window.builderAPI for programmatic control.",
    "methods": {
      "add": {
        "description": "Add a new builder component. Returns the created wrapper element.",
        "signature": "add(component: object, parentId?: string): HTMLElement"
      },
      "remove": {
        "description": "Remove a builder component by ID. Returns true if removed.",
        "signature": "remove(id: string): boolean"
      },
      "update": {
        "description": "Update properties of a builder component by ID. Returns the updated element.",
        "signature": "update(id: string, props: object): HTMLElement | null"
      },
      "reset": {
        "description": "Reset the builder canvas, removing all components. Returns true if reset.",
        "signature": "reset(): boolean"
      },
      "get": {
        "description": "Get a builder component wrapper by ID.",
        "signature": "get(id: string): HTMLElement | null"
      }
    }
  }
}
