{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Select",
  "description": "Enhanced select dropdown with styling and optional features",
  "behavior": "select",
  "element": "select",
  
  "properties": {
    "searchable": {
      "type": "boolean",
      "description": "Whether the select is searchable",
      "default": false,
      "permutations": {
        "type": "BOOLEAN",
        "assertions": {
          "true": { "selector": "element", "checks": { "hasClass": "wb-select--searchable" } }
        }
      }
    },
    "clearable": {
      "type": "boolean",
      "description": "Whether the select can be cleared",
      "default": false,
      "permutations": {
        "type": "BOOLEAN",
        "assertions": {
          "true": { "selector": "element", "checks": { "hasClass": "wb-select--clearable" } }
        }
      }
    },
    "multiple": {
      "type": "boolean",
      "description": "Whether multiple options can be selected",
      "default": false,
      "permutations": {
        "type": "BOOLEAN",
        "assertions": {
          "true": { "selector": "element", "checks": { "attribute": { "multiple": "" } } }
        }
      }
    },
    "disabled": {
      "type": "boolean",
      "description": "Whether the select is disabled",
      "default": false,
      "permutations": {
        "type": "BOOLEAN",
        "assertions": {
          "true": { "selector": "element", "checks": { "attribute": { "disabled": "" } } }
        }
      }
    },
    "placeholder": {
      "type": "string",
      "description": "Placeholder text",
      "default": "",
      "permutations": {
        "type": "EXPLICIT",
        "values": [null, "Select an option", "Choose..."]
      }
    }
  },
  
  "compliance": {
    "baseClass": "wb-select",
    "requiredChildren": {},
    "optionalChildren": {
      "option": {
        "description": "Select options",
        "required": true,
        "minCount": 1
      }
    },
    "styles": {
      "appearance": {
        "required": false
      },
      "padding": {
        "required": true
      },
      "borderRadius": {
        "required": true
      },
      "border": {
        "required": true
      }
    }
  },
  
  "interactions": {
    "elements": {
      "element": {
        "type": "select",
        "clickable": true,
        "click": {
          "action": "focus and open dropdown",
          "event": "focus"
        },
        "focus": {
          "style": { "outline": "2px solid var(--primary)" },
          "visible": true
        },
        "change": {
          "action": "selection changed",
          "event": "change"
        }
      }
    },
    "keyboard": {
      "Tab": {
        "target": "element",
        "action": "focus"
      },
      "ArrowDown": {
        "target": "element",
        "action": "open/navigate options"
      },
      "ArrowUp": {
        "target": "element",
        "action": "navigate options"
      },
      "Enter": {
        "target": "element",
        "action": "select option"
      },
      "Escape": {
        "target": "element",
        "action": "close dropdown"
      }
    }
  },
  
  "accessibility": {
    "element": {
      "description": "Select should be focusable and announce options",
      "role": "combobox"
    }
  },
  
  "events": {
    "change": {
      "trigger": "Selection changes",
      "detail": {},
      "bubbles": true
    },
    "focus": {
      "trigger": "Select receives focus",
      "detail": {},
      "bubbles": true
    },
    "blur": {
      "trigger": "Select loses focus",
      "detail": {},
      "bubbles": true
    }
  },
  
  "test": {
    "setup": [
      "<select data-wb=\"select\"><option value=\"1\">Option 1</option><option value=\"2\">Option 2</option></select>",
      "<select data-wb=\"select\" data-searchable><option value=\"a\">Apple</option><option value=\"b\">Banana</option></select>",
      "<select data-wb=\"select\" multiple><option value=\"1\">One</option><option value=\"2\">Two</option></select>",
      "<select data-wb=\"select\" disabled><option value=\"1\">Disabled</option></select>"
    ],
    
    "matrix": {
      "combinations": [
        {},
        { "searchable": true },
        { "clearable": true },
        { "multiple": true },
        { "disabled": true },
        { "searchable": true, "clearable": true },
        { "multiple": true, "searchable": true }
      ]
    },
    
    "functional": {
      "buttons": [],
      
      "interactions": [
        {
          "name": "select is focusable",
          "setup": "<select data-wb=\"select\"><option>Test</option></select>",
          "action": "click",
          "expect": {}
        },
        {
          "name": "select fires change event on selection",
          "setup": "<select data-wb=\"select\"><option value=\"1\">One</option><option value=\"2\">Two</option></select>",
          "action": "selectOption",
          "value": "2",
          "expect": {
            "event": "change"
          }
        }
      ],
      
      "keyboard": [
        {
          "name": "Tab focuses select",
          "setup": "<select data-wb=\"select\"><option>Test</option></select>",
          "key": "Tab",
          "expect": {}
        },
        {
          "name": "ArrowDown navigates options",
          "setup": "<select data-wb=\"select\"><option value=\"1\">One</option><option value=\"2\">Two</option></select>",
          "key": "ArrowDown",
          "expect": {}
        }
      ],
      
      "visual": [
        {
          "name": "select has base styling",
          "setup": "<select data-wb=\"select\"><option>Test</option></select>",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-select"]
          }
        },
        {
          "name": "searchable select has searchable class",
          "setup": "<select data-wb=\"select\" data-searchable><option>Test</option></select>",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-select", "wb-select--searchable"]
          }
        },
        {
          "name": "disabled select has disabled attribute",
          "setup": "<select data-wb=\"select\" disabled><option>Test</option></select>",
          "expect": {
            "selector": "element",
            "attribute": { "disabled": "" }
          }
        }
      ]
    }
  }
}
