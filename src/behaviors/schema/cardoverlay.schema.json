{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Card Overlay",
  "description": "Card with text overlaid on image. INHERITS from card.base (IS-A card), CONTAINS overlay content (HAS-A background, gradient).",
  "behavior": "cardoverlay",
  
  "$extends": "card.base.schema.json",
  "$inheritance": {
    "type": "IS-A",
    "parent": "card",
    "inherits": ["semantic.element", "semantic.structure.header", "compliance.containerTag", "accessibility"]
  },
  
  "$containment": [
    {
      "type": "HAS-A",
      "name": "background",
      "element": "CSS background-image",
      "description": "Full-bleed background image"
    },
    {
      "type": "HAS-A",
      "name": "gradient",
      "element": "CSS gradient overlay",
      "description": "Gradient for text readability"
    }
  ],
  
  "properties": {
    "$inherited": ["title", "subtitle"],
    
    "image": {
      "type": "string",
      "description": "Background image URL",
      "containedIn": "background"
    },
    "position": {
      "type": "string",
      "description": "Content position",
      "enum": ["top", "center", "bottom"],
      "default": "bottom"
    },
    "gradient": {
      "type": "boolean",
      "description": "Show gradient overlay",
      "default": true
    },
    "height": {
      "type": "string",
      "description": "Card height",
      "default": "300px"
    }
  },
  
  "compliance": {
    "$inherits": "card.base.schema.json#compliance",
    "baseClass": "wb-card",
    "additionalClasses": ["wb-card--overlay-card"],
    "styles": {
      "height": "from height property",
      "backgroundImage": "from image property",
      "backgroundSize": "cover"
    }
  },
  
  "test": {
    "setup": [
      "<article data-wb=\"cardoverlay\" data-image=\"bg.jpg\" data-title=\"Overlay Title\"></article>",
      "<article data-wb=\"cardoverlay\" data-image=\"bg.jpg\" data-title=\"Top\" data-position=\"top\"></article>"
    ],
    "matrix": {
      "combinations": [
        { "image": "bg.jpg", "title": "Title" },
        { "image": "bg.jpg", "title": "Title", "position": "top" },
        { "image": "bg.jpg", "title": "Title", "gradient": false },
        { "image": "bg.jpg", "title": "Title", "height": "400px" }
      ]
    },
    "functional": {
      "semantic": [
        {
          "name": "Container should be ARTICLE (inherited)",
          "setup": "<article data-wb=\"cardoverlay\" data-image=\"test.jpg\" data-title=\"Test\"></article>",
          "expect": { "selector": "element", "tagName": "ARTICLE" }
        },
        {
          "name": "Title should be in HEADER (inherited)",
          "setup": "<article data-wb=\"cardoverlay\" data-image=\"test.jpg\" data-title=\"Test\"></article>",
          "expect": { "selector": "header.wb-card__header", "tagName": "HEADER" }
        }
      ]
    }
  }
}
