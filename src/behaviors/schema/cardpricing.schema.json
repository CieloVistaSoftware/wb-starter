{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Card Pricing",
  "description": "Pricing tier card. INHERITS from card.base (IS-A card), CONTAINS pricing info (HAS-A price, features, CTA).",
  "behavior": "cardpricing",
  
  "$extends": "card.base.schema.json",
  "$inheritance": {
    "type": "IS-A",
    "parent": "card",
    "inherits": ["semantic.element", "semantic.structure", "compliance.containerTag", "accessibility"]
  },
  
  "$containment": [
    {
      "type": "HAS-A",
      "name": "price",
      "element": "DATA",
      "description": "Semantic data element for machine-readable price"
    },
    {
      "type": "HAS-A",
      "name": "features",
      "element": "UL > LI",
      "description": "List of plan features"
    },
    {
      "type": "HAS-A",
      "name": "cta",
      "element": "FOOTER > A",
      "description": "Call-to-action button in footer"
    }
  ],
  
  "properties": {
    "$inherited": ["hoverable", "elevated"],
    
    "plan": {
      "type": "string",
      "description": "Plan name",
      "mapsTo": "header",
      "permutations": {
        "type": "EXPLICIT",
        "values": ["Basic", "Pro", "Enterprise"],
        "assertions": {
          "Pro": {
            "selector": "header h3.wb-card__plan",
            "checks": { "exists": true, "tagName": "H3" }
          }
        }
      }
    },
    "price": {
      "type": "string",
      "description": "Price amount - uses semantic DATA element",
      "containedIn": "data",
      "permutations": {
        "type": "EXPLICIT",
        "values": ["$9", "$29", "$99"],
        "assertions": {
          "$29": {
            "selector": "data.wb-card__amount",
            "checks": { "exists": true, "tagName": "DATA" }
          }
        }
      }
    },
    "period": {
      "type": "string",
      "description": "Billing period",
      "default": "/month"
    },
    "features": {
      "type": "string",
      "description": "Comma-separated list of features",
      "containedIn": "ul"
    },
    "cta": {
      "type": "string",
      "description": "CTA button text",
      "default": "Get Started",
      "mapsTo": "footer"
    },
    "ctaHref": {
      "type": "string",
      "description": "CTA button link",
      "default": "#"
    },
    "featured": {
      "type": "boolean",
      "description": "Highlight as featured plan",
      "default": false
    }
  },
  
  "compliance": {
    "$inherits": "card.base.schema.json#compliance",
    "baseClass": "wb-card",
    "additionalClasses": ["wb-card--pricing"],
    "containedElements": {
      "data.wb-card__amount": {
        "description": "Semantic price value",
        "tagName": "DATA",
        "relationship": "HAS-A"
      },
      "ul.wb-card__features": {
        "description": "Features list",
        "tagName": "UL",
        "relationship": "HAS-A",
        "children": {
          "li": { "tagName": "LI" }
        }
      },
      "footer a.wb-card__cta": {
        "description": "CTA link in footer",
        "tagName": "A",
        "relationship": "HAS-A"
      }
    }
  },
  
  "interactions": {
    "elements": {
      "a.wb-card__cta": {
        "type": "link",
        "clickable": true,
        "hover": {
          "expectedStyle": {
            "filter": "brightness(1.1)",
            "transform": "translateY(-1px)"
          }
        },
        "click": { "behavior": "navigate", "description": "Navigate to pricing action" }
      }
    }
  },
  
  "test": {
    "setup": [
      "<article data-wb=\"cardpricing\" data-plan=\"Basic\" data-price=\"$9\"></article>",
      "<article data-wb=\"cardpricing\" data-plan=\"Pro\" data-price=\"$29\" data-featured></article>"
    ],
    "matrix": {
      "combinations": [
        { "plan": "Basic", "price": "$9" },
        { "plan": "Pro", "price": "$29", "featured": true },
        { "plan": "Basic", "price": "$9", "features": "Feature 1,Feature 2" },
        { "plan": "Pro", "price": "$29", "cta": "Subscribe Now" }
      ]
    },
    "functional": {
      "semantic": [
        {
          "name": "Container should be ARTICLE (inherited)",
          "setup": "<article data-wb=\"cardpricing\" data-plan=\"Test\" data-price=\"$10\"></article>",
          "expect": { "selector": "element", "tagName": "ARTICLE" }
        },
        {
          "name": "Price should use DATA element (HAS-A)",
          "setup": "<article data-wb=\"cardpricing\" data-plan=\"Test\" data-price=\"$10\"></article>",
          "expect": { "selector": "data.wb-card__amount", "tagName": "DATA" }
        },
        {
          "name": "CTA should be in FOOTER (inherited)",
          "setup": "<article data-wb=\"cardpricing\" data-plan=\"Test\" data-price=\"$10\"></article>",
          "expect": { "selector": "footer a.wb-card__cta", "exists": true }
        }
      ]
    }
  }
}
