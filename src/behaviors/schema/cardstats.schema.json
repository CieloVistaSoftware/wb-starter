{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Card Stats",
  "description": "Statistics display card. INHERITS from card.base (IS-A card), CONTAINS statistic data (HAS-A value, label, trend).",
  "behavior": "cardstats",
  
  "$extends": "card.base.schema.json",
  "$inheritance": {
    "type": "IS-A",
    "parent": "card",
    "inherits": ["semantic.element", "semantic.structure.header", "semantic.structure.main", "compliance.containerTag", "accessibility"]
  },
  
  "$containment": [
    {
      "type": "HAS-A",
      "name": "value",
      "element": "DATA",
      "description": "Semantic data element for machine-readable statistic value"
    },
    {
      "type": "HAS-A",
      "name": "trend",
      "element": "P",
      "description": "Trend indicator with direction and value"
    }
  ],
  
  "properties": {
    "$inherited": ["elevated"],
    
    "value": {
      "type": "string",
      "description": "The main statistic value - uses semantic DATA element",
      "required": true,
      "containedIn": "data",
      "mapsTo": "main"
    },
    "label": {
      "type": "string",
      "description": "Label describing the value",
      "mapsTo": "main"
    },
    "icon": {
      "type": "string",
      "description": "Icon emoji or symbol",
      "mapsTo": "header"
    },
    "trend": {
      "type": "string",
      "description": "Trend direction",
      "enum": ["up", "down", "neutral"],
      "containedIn": "trend",
      "mapsTo": "main"
    },
    "trendValue": {
      "type": "string",
      "description": "Trend value (e.g., +12%)",
      "containedIn": "trend",
      "mapsTo": "main"
    },
    "color": {
      "type": "string",
      "description": "Accent color for the card"
    }
  },
  
  "compliance": {
    "$inherits": "card.base.schema.json#compliance",
    "baseClass": "wb-card",
    "additionalClasses": ["wb-card--stats"],
    "containedElements": {
      "data.wb-card__stats-value": {
        "description": "Semantic data element for value",
        "tagName": "DATA",
        "relationship": "HAS-A",
        "required": true
      },
      "p.wb-card__stats-label": {
        "description": "Label text",
        "tagName": "P",
        "relationship": "HAS-A"
      },
      "p.wb-card__stats-trend": {
        "description": "Trend indicator",
        "tagName": "P",
        "relationship": "HAS-A"
      }
    }
  },
  
  "test": {
    "setup": [
      "<article data-wb=\"cardstats\" data-value=\"1,234\" data-label=\"Users\"></article>",
      "<article data-wb=\"cardstats\" data-value=\"$50K\" data-label=\"Revenue\" data-icon=\"ðŸ’°\" data-trend=\"up\" data-trend-value=\"+12%\"></article>"
    ],
    "matrix": {
      "combinations": [
        { "value": "100" },
        { "value": "100", "label": "Items" },
        { "value": "100", "icon": "ðŸ“Š" },
        { "value": "100", "trend": "up", "trendValue": "+10%" },
        { "value": "100", "label": "Items", "icon": "ðŸ“Š", "trend": "down", "trendValue": "-5%" }
      ]
    },
    "functional": {
      "semantic": [
        {
          "name": "Container should be ARTICLE (inherited)",
          "setup": "<article data-wb=\"cardstats\" data-value=\"100\"></article>",
          "expect": { "selector": "element", "tagName": "ARTICLE" }
        },
        {
          "name": "Value should use DATA element (HAS-A)",
          "setup": "<article data-wb=\"cardstats\" data-value=\"100\"></article>",
          "expect": { "selector": "main data.wb-card__stats-value", "tagName": "DATA" }
        },
        {
          "name": "Icon should be in HEADER (inherited)",
          "setup": "<article data-wb=\"cardstats\" data-value=\"100\" data-icon=\"ðŸ“ˆ\"></article>",
          "expect": { "selector": "header.wb-card__header", "tagName": "HEADER" }
        }
      ]
    }
  }
}
