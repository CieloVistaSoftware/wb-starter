{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Spinner",
  "description": "Loading spinner indicator with color and size variants. Supports staggered animation start.",
  "behavior": "spinner",
  
  "properties": {
    "size": {
      "type": "string",
      "description": "Size of the spinner",
      "enum": ["sm", "md", "lg", "xl"],
      "default": "md",
      "permutations": {
        "type": "ALL_ENUM",
        "assertions": {
          "sm": {
            "selector": ".wb-spinner div",
            "checks": { "width": "16px", "height": "16px" }
          },
          "md": {
            "selector": ".wb-spinner div",
            "checks": { "width": "24px", "height": "24px" }
          },
          "lg": {
            "selector": ".wb-spinner div",
            "checks": { "width": "32px", "height": "32px" }
          },
          "xl": {
            "selector": ".wb-spinner div",
            "checks": { "width": "48px", "height": "48px" }
          }
        }
      }
    },
    "color": {
      "type": "string",
      "description": "Color theme of the spinner",
      "enum": ["primary", "success", "warning", "error"],
      "default": "primary",
      "permutations": {
        "type": "ALL_ENUM",
        "assertions": {
          "primary": {
            "selector": ".wb-spinner div",
            "checks": { "style": { "borderTopColor": "rgb(99, 102, 241)" } }
          },
          "success": {
            "selector": ".wb-spinner div",
            "checks": { "style": { "borderTopColor": "rgb(34, 197, 94)" } }
          },
          "warning": {
            "selector": ".wb-spinner div",
            "checks": { "style": { "borderTopColor": "rgb(245, 158, 11)" } }
          },
          "error": {
            "selector": ".wb-spinner div",
            "checks": { "style": { "borderTopColor": "rgb(239, 68, 68)" } }
          }
        }
      }
    },
    "delay": {
      "type": "number",
      "description": "Animation delay in seconds for staggered start",
      "default": 0,
      "permutations": {
        "type": "EXPLICIT",
        "values": [0, 0.25, 0.5],
        "assertions": {}
      }
    }
  },
  
  "compliance": {
    "baseClass": "wb-spinner",
    "requiredChildren": {
      "div": {
        "description": "Inner spinning element",
        "required": true
      }
    },
    "styles": {
      "borderRadius": {
        "required": true,
        "value": "50%",
        "scope": ".wb-spinner div"
      }
    }
  },
  
  "interactions": {
    "elements": {},
    "keyboard": {}
  },
  
  "accessibility": {
    "element": {
      "role": "status",
      "aria-label": "Loading"
    }
  },
  
  "events": {},
  
  "test": {
    "setup": [
      "<div data-wb=\"spinner\"></div>",
      "<div data-wb=\"spinner\" data-size=\"lg\" data-color=\"success\"></div>",
      "<div data-wb=\"spinner\" data-color=\"error\" data-delay=\"0.5\"></div>"
    ],
    
    "matrix": {
      "combinations": [
        {},
        { "size": "sm" },
        { "size": "lg" },
        { "size": "xl" },
        { "color": "primary" },
        { "color": "success" },
        { "color": "warning" },
        { "color": "error" },
        { "size": "lg", "color": "success" },
        { "delay": "0.25" },
        { "size": "md", "color": "primary", "delay": "0" }
      ]
    },
    
    "functional": {
      "buttons": [],
      "interactions": [],
      "keyboard": [],
      
      "visual": [
        {
          "name": "spinner has circular shape",
          "setup": "<div data-wb=\"spinner\"></div>",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-spinner"]
          }
        },
        {
          "name": "spinner inner element is circular",
          "setup": "<div data-wb=\"spinner\"></div>",
          "checks": [
            { "selector": "div", "style": "borderRadius", "pattern": "50%" }
          ]
        },
        {
          "name": "spinner has animation",
          "setup": "<div data-wb=\"spinner\"></div>",
          "checks": [
            { "selector": "div", "style": "animation", "notEmpty": true }
          ]
        }
      ]
    }
  }
}
