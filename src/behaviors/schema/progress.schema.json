{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Progress Bar",
  "description": "Animated progress bar with optional striping.",
  "behavior": "progress",
  "element": "progress",
  
  "properties": {
    "value": {
      "type": "number",
      "description": "Current progress value",
      "default": 0,
      "minimum": 0,
      "maximum": 100,
      "permutations": {
        "type": "EXPLICIT",
        "values": [0, 25, 50, 75, 100]
      }
    },
    "max": {
      "type": "number",
      "description": "Maximum value",
      "default": 100,
      "permutations": {
        "type": "EXPLICIT",
        "values": [100, 200]
      }
    },
    "animated": {
      "type": "boolean",
      "description": "Whether to animate from 0 on load",
      "default": true,
      "permutations": {
        "type": "BOOLEAN"
      }
    },
    "striped": {
      "type": "boolean",
      "description": "Show striped pattern on progress bar",
      "default": false,
      "permutations": {
        "type": "BOOLEAN"
      }
    },
    "variant": {
      "type": "string",
      "description": "Color variant",
      "enum": ["primary", "success", "warning", "danger", "info"],
      "default": "primary",
      "permutations": {
        "type": "ALL_ENUM"
      }
    },
    "size": {
      "type": "string",
      "description": "Size of the progress bar",
      "enum": ["sm", "md", "lg", "xl"],
      "default": "md",
      "permutations": {
        "type": "ALL_ENUM"
      }
    }
  },
  
  "compliance": {
    "baseClass": "wb-progress",
    "styles": {
      "height": {
        "required": true,
        "value": "8px"
      },
      "borderRadius": {
        "required": true,
        "value": "8px"
      },
      "overflow": {
        "required": true,
        "value": "hidden"
      }
    }
  },
  
  "interactions": {
    "elements": {},
    "keyboard": {}
  },
  
  "accessibility": {
    "element": {
      "description": "Progress bar should indicate loading state"
    }
  },
  
  "events": {},
  
  "test": {
    "setup": [
      "<progress data-wb=\"progress\" value=\"50\" max=\"100\"></progress>",
      "<progress data-wb=\"progress\" value=\"75\" max=\"100\" data-striped></progress>",
      "<progress data-wb=\"progress\" value=\"25\" max=\"100\" data-animated=\"false\"></progress>"
    ],
    
    "matrix": {
      "combinations": [
        { "value": 0 },
        { "value": 25 },
        { "value": 50 },
        { "value": 75 },
        { "value": 100 },
        { "value": 50, "striped": true },
        { "value": 50, "animated": false },
        { "value": 50, "max": 200 },
        { "variant": "success" },
        { "variant": "danger" },
        { "size": "sm" },
        { "size": "lg" }
      ]
    },
    
    "functional": {
      "buttons": [],
      "interactions": [],
      "keyboard": [],
      
      "visual": [
        {
          "name": "progress bar has correct height",
          "setup": "<progress data-wb=\"progress\" value=\"50\" max=\"100\"></progress>",
          "expect": {
            "selector": "element",
            "hasClass": ["wb-progress"],
            "style": {
              "height": "8px"
            }
          }
        }
      ]
    },
    
    "api": {
      "methods": [
        {
          "name": "setValue updates progress",
          "setup": "<progress data-wb=\"progress\" value=\"25\" max=\"100\"></progress>",
          "call": "element.wbProgress.setValue(75)",
          "expect": {}
        },
        {
          "name": "getValue returns value",
          "setup": "<progress data-wb=\"progress\" value=\"50\" max=\"100\"></progress>",
          "call": "if (element.wbProgress.getValue() != 50) throw new Error('Wrong value')",
          "expect": {}
        }
      ]
    }
  }
}
