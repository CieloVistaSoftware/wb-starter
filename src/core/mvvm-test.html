<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MVVM Schema Builder Test v3</title>
  <link rel="stylesheet" href="../styles/themes.css">
  <link rel="stylesheet" href="../styles/site.css">
  <link rel="icon" href="/assets/icons/icon-72.png">

</head>
<body class="mvvm-test-page">
  <h1>üèóÔ∏è MVVM Schema Builder v3.0</h1>
  <div class="page__utilities" aria-hidden="false">
    <wb-themecontrol data-show-label="false" id="themeControl"></wb-themecontrol>
  </div>
  <p><code>$view</code> + <code>$methods</code> format with lowercase HTML5 tags.</p>
  
  <div id="status" class="status info">Loading schemas...</div>

  <!-- ============================================ -->
  <h2>MVVM Structure</h2>
  <!-- ============================================ -->
  <table class="mvvm-table">
    <thead>
      <tr>
        <th>Layer</th>
        <th>Schema Section</th>
        <th>Purpose</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>M</strong>odel</td>
        <td><code>properties</code></td>
        <td>Data inputs (attributes)</td>
      </tr>
      <tr>
        <td><strong>V</strong>iew</td>
        <td><code>$view</code></td>
        <td>DOM structure (lowercase tags)</td>
      </tr>
      <tr>
        <td><strong>V</strong>iew<strong>M</strong>odel</td>
        <td><code>$methods</code></td>
        <td>Callable functions</td>
      </tr>
    </tbody>
  </table>

  <!-- ============================================ -->
  <h2>Schema Format (v3.0)</h2>
  <!-- ============================================ -->
  <div class="schema-format">
<pre>{
  "behavior": "card",
  "baseClass": "wb-card",
  
  "properties": {
    "title":   { "type": "string" },
    "elevated": { "type": "boolean" }
  },
  
  "$view": [
    { "name": "header", "tag": "header", "createdWhen": "title OR subtitle" },
    { "name": "title",  "tag": "h3", "parent": "header", "content": "{{title}}" },
    { "name": "main",   "tag": "main", "required": true, "content": "{{content}}" },
    { "name": "footer", "tag": "footer", "createdWhen": "footer" }
  ],
  
  "$methods": {
    "show":   { "description": "Shows the card" },
    "hide":   { "description": "Hides the card" },
    "toggle": { "description": "Toggles visibility" }
  }
}

Classes AUTO-GENERATED: baseClass + "__" + name
  ‚Üí wb-card__header
  ‚Üí wb-card__title
  ‚Üí wb-card__main
  ‚Üí wb-card__footer</pre>
  </div>
  
  <!-- ============================================ -->
  <h2>1. Badge (CSS-only, no JS needed)</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>Web Component Tags</h3>
      <p>
        <wb-badge>Default</wb-badge>
        <wb-badge variant="success">Success</wb-badge>
        <wb-badge variant="warning">Warning</wb-badge>
        <wb-badge variant="error">Error</wb-badge>
      </p>
      <wb-issue>CSS styles <code>wb-badge</code> tag directly. No JavaScript, no schema processing.</wb-issue>
    </div>
    <div class="test-box">
      <h3>HTML Output</h3>
      <pre>&lt;wb-badge variant="success"&gt;Success&lt;/wb-badge&gt;

CSS:
wb-badge[variant="success"] { 
  background: var(--success); 
}</pre>
    </div>
  </div>
  
  <!-- ============================================ -->
  <h2>2. Card with Title (Schema-built)</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>&lt;wb-card&gt; Tag</h3>
      <wb-card title="Hello World">
        <p>This content goes in the main slot.</p>
      </wb-card>
    </div>
    <div class="test-box">
      <h3>data-wb Attribute</h3>
      <wb-card data-title="Hello World">
        <p>This content goes in the main slot.</p>
      </wb-card>
    </div>
  </div>
  
  <!-- ============================================ -->
  <h2>3. Card with Title + Subtitle</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>&lt;wb-card&gt; Tag</h3>
      <wb-card title="Card Title" subtitle="A helpful subtitle">
        <p>Content with both title and subtitle.</p>
      </wb-card>
    </div>
    <div class="test-box">
      <h3>Generated DOM</h3>
      <pre id="dom-output-2">Loading...</pre>
    </div>
  </div>
  
  <!-- ============================================ -->
  <h2>4. Card with Footer</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>&lt;wb-card&gt; Tag</h3>
      <wb-card title="With Footer" footer="Footer text here">
        <p>This card has a footer section.</p>
      </wb-card>
    </div>
    <div class="test-box">
      <h3>data-wb Attribute</h3>
      <wb-card data-title="With Footer" data-footer="Footer text here">
        <p>This card has a footer section.</p>
      </wb-card>
    </div>
  </div>
  
  <!-- ============================================ -->
  <h2>5. Full Card (Title + Subtitle + Footer + Elevated)</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>&lt;wb-card&gt; Tag</h3>
      <wb-card title="Full Example" subtitle="All the parts" footer="¬© 2025" elevated>
        <p>This card demonstrates all $view parts being created.</p>
      </wb-card>
    </div>
    <div class="test-box">
      <h3>Generated DOM</h3>
      <pre id="dom-output-5">Loading...</pre>
    </div>
  </div>
  
  <!-- ============================================ -->
  <h2>6. Minimal Card (No Header)</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>&lt;wb-card&gt; Tag</h3>
      <wb-card>
        <p>Just content, no title means no header created.</p>
      </wb-card>
    </div>
    <div class="test-box">
      <h3>Generated DOM</h3>
      <pre id="dom-output-6">Loading...</pre>
    </div>
  </div>
  
  <!-- ============================================ -->
  <h2>7. $methods Test</h2>
  <!-- ============================================ -->
  <div class="test-section">
    <div class="test-box">
      <h3>Method Binding</h3>
      <wb-card id="method-test" title="Method Test">
        <p>Click buttons to test $methods.</p>
        <p>
          <button onclick="document.getElementById('method-test').hide?.() || alert('hide() not implemented yet')">Hide</button>
          <button onclick="document.getElementById('method-test').show?.() || alert('show() not implemented yet')">Show</button>
          <button onclick="document.getElementById('method-test').toggle?.() || alert('toggle() not implemented yet')">Toggle</button>
        </p>
      </wb-card>
    </div>
    <div class="test-box">
      <h3>$methods Definition</h3>
      <pre>"$methods": {
  "show":   { "description": "Shows the card" },
  "hide":   { "description": "Hides the card" },
  "toggle": { "description": "Toggles visibility" }
}

// Usage:
element.show()
element.hide()
element.toggle()</pre>
    </div>
  </div>

  <!-- ============================================ -->
  <h2>Debug Info</h2>
  <!-- ============================================ -->
  <div id="debug">
    <pre id="schema-list">Loading schemas...</pre>
  </div>

  <script type="module">
  import WB from '/src/core/wb-lazy.js';

  // Typical initialization for demos (use wb-lazy to avoid site-shell boot)
  if (!WB) throw new Error('WB runtime not available');
  WB.init({
    scan: true,
    observe: true,
    autoInject: true,
    preload: ['ripple','themecontrol','tooltip']
  });
  </script>
</body>
</html>
