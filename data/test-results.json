{
  "timestamp": "2026-01-13T22:42:22.428Z",
  "duration": "88.95s",
  "exitCode": 1,
  "summary": "13 passed, 4 failed, 0 skipped",
  "filter": "duplicate",
  "singleThread": false,
  "stdout": "Skipping non-component schema: search-index.schema.json\nSkipping non-component schema: views.schema.json\n\nRunning 16 tests using 8 workers\n\n  ok 1 [compliance] › tests\\compliance\\behavior-registry.spec.ts:64:3 › Behavior Registry Integrity › no duplicate behavior keys in registry (21ms)\n  ok 2 [compliance] › tests\\compliance\\fix-data-integrity.spec.ts:15:5 › Fix Data Integrity › Fix WB_CODE_DUPLICATE_EXPORT_016 should have valid structure (29ms)\n  ok 3 [compliance] › tests\\compliance\\fix-data-integrity.spec.ts:15:5 › Fix Data Integrity › Fix WB_TEXTAREA_DUPLICATE_VAR_033 should have valid structure (77ms)\n  ok 5 [compliance] › tests\\compliance\\registry-integrity.spec.ts:9:5 › Fix Registry Data Integrity › Fix WB_TABLE_DUPLICATE_VAR_020 should have lastTested date (5ms)\n  ok 4 [compliance] › tests\\compliance\\fix-data-integrity.spec.ts:15:5 › Fix Data Integrity › Fix WB_DUPLICATE_VARIABLES_BUILDER_APP_058 should have valid structure (25ms)\n  ok 6 [compliance] › tests\\compliance\\registry-integrity.spec.ts:9:5 › Fix Registry Data Integrity › Fix WB_DUPLICATE_VARIABLES_BUILDER_APP_058 should have lastTested date (6ms)\n  ok 7 [compliance] › tests\\compliance\\registry-integrity.spec.ts:9:5 › Fix Registry Data Integrity › Fix WB_TEXTAREA_DUPLICATE_VAR_033 should have lastTested date (27ms)\n  ok 8 [compliance] › tests\\compliance\\css-oop-compliance.spec.ts:203:3 › Single Source of Truth Compliance › no duplicate constant definitions across JS files (76ms)\n  ok 10 [compliance] › tests\\compliance\\fix-data-integrity.spec.ts:15:5 › Fix Data Integrity › Fix WB_TABLE_DUPLICATE_VAR_020 should have valid structure (66ms)\n  x  9 [compliance] › tests\\compliance\\source-schema-compliance.spec.ts:31:3 › Source-Schema: Duplicate Variable Detection › no duplicate const/let declarations in JS files (270ms)\n  ok 11 [compliance] › tests\\compliance\\source-schema-compliance.spec.ts:88:3 › Source-Schema: Duplicate Variable Detection › no redeclared parameters in functions (220ms)\n  ok 13 [compliance] › tests\\compliance\\registry-integrity.spec.ts:9:5 › Fix Registry Data Integrity › Fix WB_CODE_DUPLICATE_EXPORT_016 should have lastTested date (8ms)\n  ok 12 [compliance] › tests\\compliance\\fix-viewer.spec.ts:222:5 › Fix Viewer Compliance › Live Data Audit › should not have duplicate IDs (4.4s)\n  x  15 [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:274:5 › Notes Behavior › Save with Duplicate Prevention › should show success when saving content (30.1s)\n  x  14 [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:282:5 › Notes Behavior › Save with Duplicate Prevention › should prevent duplicate content on second save (30.1s)\n  x  16 [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:267:5 › Notes Behavior › Save with Duplicate Prevention › should show warning when no content to save (30.1s)\n  x  18 [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:282:5 › Notes Behavior › Save with Duplicate Prevention › should prevent duplicate content on second save (retry #1) (32.9s)\n  x  17 [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:274:5 › Notes Behavior › Save with Duplicate Prevention › should show success when saving content (retry #1) (32.0s)\n  x  19 [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:267:5 › Notes Behavior › Save with Duplicate Prevention › should show warning when no content to save (retry #1) (33.4s)\n\n════════════════════════════════════════════════════════════\n  WB TEST RESULTS\n════════════════════════════════════════════════════════════\n  Total: 19 tests in 80.0s\n  ✓ Passed:  12\n  ✗ Failed:  7\n\n  By Project:\n    ✗ compliance: 12/13 passed\n    ✗ behaviors: 0/6 passed\n\n  See failures: data/test-results/failures.json\n  Live log:    data/test-results/failures-live.log\n════════════════════════════════════════════════════════════\n\n\n\n  1) [compliance] › tests\\compliance\\source-schema-compliance.spec.ts:31:3 › Source-Schema: Duplicate Variable Detection › no duplicate const/let declarations in JS files \n\n    Error: 87 duplicate declarations\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeLessThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: < \u001b[32m10\u001b[39m\n    Received:   \u001b[31m87\u001b[39m\n\n      83 |     }\n      84 |     // Track progress - these should be fixed over time\n    > 85 |     expect(issues.length, `${issues.length} duplicate declarations`).toBeLessThan(10);\n         |                                                                      ^\n      86 |   });\n      87 |   \n      88 |   test('no redeclared parameters in functions', () => {\n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\compliance\\source-schema-compliance.spec.ts:85:70\n\n  2) [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:267:5 › Notes Behavior › Save with Duplicate Prevention › should show warning when no content to save \n\n    \u001b[31mTest timeout of 30000ms exceeded.\u001b[39m\n\n    Error: page.click: Test timeout of 30000ms exceeded.\n    Call log:\n    \u001b[2m  - waiting for locator('#test-container .wb-notes__wide-btn[data-action=\"save\"]')\u001b[22m\n\n\n      267 |     test('should show warning when no content to save', async ({ page }) => {\n      268 |       await injectNotes(page, '<div data-wb=\"notes\"></div>');\n    > 269 |       await page.click('#test-container .wb-notes__wide-btn[data-action=\"save\"]');\n          |                  ^\n      270 |       const status = page.locator('#test-container .wb-notes__status');\n      271 |       await expect(status).toContainText('No notes to save');\n      272 |     });\n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\behaviors\\ui\\notes.spec.ts:269:18\n\n    Error Context: data\\test-results\\ui-notes-Notes-Behavior-Sa-13efc-ing-when-no-content-to-save-behaviors\\error-context.md\n\n    Retry #1 ───────────────────────────────────────────────────────────────────────────────────────\n\n    \u001b[31mTest timeout of 30000ms exceeded.\u001b[39m\n\n    Error: page.click: Test timeout of 30000ms exceeded.\n    Call log:\n    \u001b[2m  - waiting for locator('#test-container .wb-notes__wide-btn[data-action=\"save\"]')\u001b[22m\n\n\n      267 |     test('should show warning when no content to save', async ({ page }) => {\n      268 |       await injectNotes(page, '<div data-wb=\"notes\"></div>');\n    > 269 |       await page.click('#test-container .wb-notes__wide-btn[data-action=\"save\"]');\n          |                  ^\n      270 |       const status = page.locator('#test-container .wb-notes__status');\n      271 |       await expect(status).toContainText('No notes to save');\n      272 |     });\n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\behaviors\\ui\\notes.spec.ts:269:18\n\n    Error Context: data\\test-results\\ui-notes-Notes-Behavior-Sa-13efc-ing-when-no-content-to-save-behaviors-retry1\\error-context.md\n\n    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────\n    data\\test-results\\ui-notes-Notes-Behavior-Sa-13efc-ing-when-no-content-to-save-behaviors-retry1\\trace.zip\n    Usage:\n\n        npx playwright show-trace data\\test-results\\ui-notes-Notes-Behavior-Sa-13efc-ing-when-no-content-to-save-behaviors-retry1\\trace.zip\n\n    ────────────────────────────────────────────────────────────────────────────────────────────────\n\n  3) [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:274:5 › Notes Behavior › Save with Duplicate Prevention › should show success when saving content \n\n    \u001b[31mTest timeout of 30000ms exceeded.\u001b[39m\n\n    Error: page.fill: Test timeout of 30000ms exceeded.\n    Call log:\n    \u001b[2m  - waiting for locator('#test-container .wb-notes__textarea')\u001b[22m\n\n\n      274 |     test('should show success when saving content', async ({ page }) => {\n      275 |       await injectNotes(page, '<div data-wb=\"notes\"></div>');\n    > 276 |       await page.fill('#test-container .wb-notes__textarea', 'Test note content ' + Date.now());\n          |                  ^\n      277 |       await page.click('#test-container .wb-notes__wide-btn[data-action=\"save\"]');\n      278 |       const status = page.locator('#test-container .wb-notes__status');\n      279 |       await expect(status).toContainText('Saved');\n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\behaviors\\ui\\notes.spec.ts:276:18\n\n    Error Context: data\\test-results\\ui-notes-Notes-Behavior-Sa-eecf6-success-when-saving-content-behaviors\\error-context.md\n\n    Retry #1 ───────────────────────────────────────────────────────────────────────────────────────\n\n    \u001b[31mTest timeout of 30000ms exceeded.\u001b[39m\n\n    Error: page.fill: Test timeout of 30000ms exceeded.\n    Call log:\n    \u001b[2m  - waiting for locator('#test-container .wb-notes__textarea')\u001b[22m\n\n\n      274 |     test('should show success when saving content', async ({ page }) => {\n      275 |       await injectNotes(page, '<div data-wb=\"notes\"></div>');\n    > 276 |       await page.fill('#test-container .wb-notes__textarea', 'Test note content ' + Date.now());\n          |                  ^\n      277 |       await page.click('#test-container .wb-notes__wide-btn[data-action=\"save\"]');\n      278 |       const status = page.locator('#test-container .wb-notes__status');\n      279 |       await expect(status).toContainText('Saved');\n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\behaviors\\ui\\notes.spec.ts:276:18\n\n    Error Context: data\\test-results\\ui-notes-Notes-Behavior-Sa-eecf6-success-when-saving-content-behaviors-retry1\\error-context.md\n\n    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────\n    data\\test-results\\ui-notes-Notes-Behavior-Sa-eecf6-success-when-saving-content-behaviors-retry1\\trace.zip\n    Usage:\n\n        npx playwright show-trace data\\test-results\\ui-notes-Notes-Behavior-Sa-eecf6-success-when-saving-content-behaviors-retry1\\trace.zip\n\n    ────────────────────────────────────────────────────────────────────────────────────────────────\n\n  4) [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:282:5 › Notes Behavior › Save with Duplicate Prevention › should prevent duplicate content on second save \n\n    \u001b[31mTest timeout of 30000ms exceeded.\u001b[39m\n\n    Error: page.fill: Test timeout of 30000ms exceeded.\n    Call log:\n    \u001b[2m  - waiting for locator('#test-container .wb-notes__textarea')\u001b[22m\n\n\n      285 |       \n      286 |       // First save\n    > 287 |       await page.fill('#test-container .wb-notes__textarea', content);\n          |                  ^\n      288 |       await page.click('#test-container .wb-notes__wide-btn[data-action=\"save\"]');\n      289 |       await page.waitForTimeout(100);\n      290 |       \n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\behaviors\\ui\\notes.spec.ts:287:18\n\n    Error Context: data\\test-results\\ui-notes-Notes-Behavior-Sa-c17cc-cate-content-on-second-save-behaviors\\error-context.md\n\n    Retry #1 ───────────────────────────────────────────────────────────────────────────────────────\n\n    \u001b[31mTest timeout of 30000ms exceeded.\u001b[39m\n\n    Error: page.fill: Test timeout of 30000ms exceeded.\n    Call log:\n    \u001b[2m  - waiting for locator('#test-container .wb-notes__textarea')\u001b[22m\n\n\n      285 |       \n      286 |       // First save\n    > 287 |       await page.fill('#test-container .wb-notes__textarea', content);\n          |                  ^\n      288 |       await page.click('#test-container .wb-notes__wide-btn[data-action=\"save\"]');\n      289 |       await page.waitForTimeout(100);\n      290 |       \n        at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\tests\\behaviors\\ui\\notes.spec.ts:287:18\n\n    Error Context: data\\test-results\\ui-notes-Notes-Behavior-Sa-c17cc-cate-content-on-second-save-behaviors-retry1\\error-context.md\n\n    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────\n    data\\test-results\\ui-notes-Notes-Behavior-Sa-c17cc-cate-content-on-second-save-behaviors-retry1\\trace.zip\n    Usage:\n\n        npx playwright show-trace data\\test-results\\ui-notes-Notes-Behavior-Sa-c17cc-cate-content-on-second-save-behaviors-retry1\\trace.zip\n\n    ────────────────────────────────────────────────────────────────────────────────────────────────\n\n  4 failed\n    [compliance] › tests\\compliance\\source-schema-compliance.spec.ts:31:3 › Source-Schema: Duplicate Variable Detection › no duplicate const/let declarations in JS files \n    [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:267:5 › Notes Behavior › Save with Duplicate Prevention › should show warning when no content to save \n    [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:274:5 › Notes Behavior › Save with Duplicate Prevention › should show success when saving content \n    [behaviors] › tests\\behaviors\\ui\\notes.spec.ts:282:5 › Notes Behavior › Save with Duplicate Prevention › should prevent duplicate content on second save \n  12 passed (1.4m)\n",
  "stderr": "Duplicate variable declarations: 87\n  - builder-app\\builder-tree.js:1110 - DUPLICATE: \"expanded\" in initTree() (first at line 1099)\n  - builder-app\\builder-welcome.js:245 - DUPLICATE: \"template\" in global() (first at line 206)\n  - builder-app\\builder-workflow.js:386 - DUPLICATE: \"info\" in global() (first at line 306)\n  - builder-app\\builder-workflow.js:421 - DUPLICATE: \"input\" in global() (first at line 287)\n  - builder-app\\builder-workflow.js:437 - DUPLICATE: \"input\" in global() (first at line 287)\n\n❌ FAILED: no duplicate const/let declarations in JS files\n   Error: 87 duplicate declarations\n[WebServer] TypeError: Cannot read properties of undefined (reading 'theme')\n[WebServer]     at file:///C:/Users/jwpmi/Downloads/AI/wb-starter/server.js:153:35\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at next (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:157:13)\n[WebServer]     at Route.dispatch (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:117:3)\n[WebServer]     at handle (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:435:11)\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:295:15\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:600:14)\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:610:14)\n[WebServer]     at processParams (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:664:3)\n\n⏱️ FAILED: should show success when saving content\n   Test timeout of 30000ms exceeded.\n\n⏱️ FAILED: should prevent duplicate content on second save\n   Test timeout of 30000ms exceeded.\n\n⏱️ FAILED: should show warning when no content to save\n   Test timeout of 30000ms exceeded.\n[WebServer] TypeError: Cannot read properties of undefined (reading 'theme')\n[WebServer]     at file:///C:/Users/jwpmi/Downloads/AI/wb-starter/server.js:153:35\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at next (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:157:13)\n[WebServer]     at Route.dispatch (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:117:3)\n[WebServer]     at handle (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:435:11)\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:295:15\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:600:14)\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:610:14)\n[WebServer]     at processParams (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:664:3)\n[WebServer] TypeError: Cannot read properties of undefined (reading 'theme')\n[WebServer]     at file:///C:/Users/jwpmi/Downloads/AI/wb-starter/server.js:153:35\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at next (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:157:13)\n[WebServer]     at Route.dispatch (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:117:3)\n[WebServer]     at handle (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:435:11)\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:295:15\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:600:14)\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:610:14)\n[WebServer]     at processParams (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:664:3)\n[WebServer] TypeError: Cannot read properties of undefined (reading 'theme')\n[WebServer]     at file:///C:/Users/jwpmi/Downloads/AI/wb-starter/server.js:153:35\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at next (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:157:13)\n[WebServer]     at Route.dispatch (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:117:3)\n[WebServer]     at handle (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:435:11)\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:295:15\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:600:14)\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:610:14)\n[WebServer]     at processParams (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:664:3)\n[WebServer] TypeError: Cannot read properties of undefined (reading 'theme')\n[WebServer]     at file:///C:/Users/jwpmi/Downloads/AI/wb-starter/server.js:153:35\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at next (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:157:13)\n[WebServer]     at Route.dispatch (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\route.js:117:3)\n[WebServer]     at handle (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:435:11)\n[WebServer]     at Layer.handleRequest (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\lib\\layer.js:152:17)\n[WebServer]     at C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:295:15\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:600:14)\n[WebServer]     at param (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:610:14)\n[WebServer]     at processParams (C:\\Users\\jwpmi\\Downloads\\AI\\wb-starter\\node_modules\\router\\index.js:664:3)\n\n⏱️ FAILED: should prevent duplicate content on second save\n   Test timeout of 30000ms exceeded.\n\n⏱️ FAILED: should show success when saving content\n   Test timeout of 30000ms exceeded.\n\n⏱️ FAILED: should show warning when no content to save\n   Test timeout of 30000ms exceeded.\n"
}