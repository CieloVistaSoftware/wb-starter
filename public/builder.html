<!DOCTYPE html>
<html id="builder-html-1" lang="en" data-theme="dark">
<head id="builder-head-2">
  <link id="builder-link-3" rel="icon" type="image/svg+xml" href="/favicon.svg">
  <meta id="builder-meta-4" charset="UTF-8">
  <meta id="builder-meta-5" name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="builder-title-6">WB Page Builder</title>
  <link id="builder-link-7" rel="preconnect" href="https://fonts.googleapis.com">
  <link id="builder-link-8" rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link id="builder-link-9" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link id="builder-link-10" rel="stylesheet" href="../src/styles/themes.css">
  <link id="builder-link-11" rel="stylesheet" href="../src/styles/site.css">
  <link id="builder-link-12" rel="stylesheet" href="../src/behaviors/css/effects.css">
  <link id="builder-link-13" rel="stylesheet" href="../src/styles/builder.css">
</head>
<body id="builder-body-14" class="wb-builder">
  <header class="builder-header" id="builderHeader">
    <div class="header-content" id="headerContent">
      <h1 id="headerTitle"><span style="color: #3b82f6; font-size: 1.2em;">&#9733;</span> WB Builder</h1>
      <div class="header-actions" id="headerActions">
        <!-- Collaboration Status -->
        <div class="collab-status" id="collabStatus" title="Collaboration: Offline">
          <span class="collab-dot offline" id="collabDot"></span>
          <span class="collab-text" id="collabText">Offline</span>
        </div>
        <!-- Theme Selector -->
        <select id="pageTheme" class="theme-select" title="Change Page Theme">
          <!-- Options populated by JS -->
        </select>
        <!-- Preview Toggle -->
        <button class="header-btn" id="previewBtn" title="Preview Mode (Ctrl+P)">
          <span id="previewIcon">ğŸ‘ï¸</span> Preview
        </button>
        <!-- Keyboard Shortcuts -->
        <button class="header-btn" id="shortcutsBtn" onclick="showShortcuts()" title="Keyboard Shortcuts">âŒ¨ï¸</button>
        <!-- Notes -->
        <button class="header-btn" id="headerNotesBtn" onclick="toggleNotesDrawer()" title="Toggle Notes (Ctrl+Shift+N)">ğŸ“ Notes</button>
      </div>
    </div>
  </header>
  
  <main class="builder-container" id="builderContainer">
    <div id="builder-root">
      <!-- LEFT SIDEBAR - Templates Library -->
      <aside class="sidebar" id="sidebar" 
        data-wb="drawerLayout"
        data-position="left"
        data-width="320px"
        data-min-width="1.5rem"
        data-max-width="50vw"
        data-resizable="true"
        data-save-state="true"
        data-toggle-selector="#sidebarToggle"
        data-handle-selector="#sidebarResizeHandle">
        <button class="sidebar-toggle" id="sidebarToggle" title="Toggle sidebar (\)">
          <span class="toggle-icon" id="sidebarToggleIcon">â—€</span>
        </button>
        <div class="sidebar-collapsed-label" id="sidebarCollapsedLabel">TEMPLATES</div>
        <div class="sidebar-resize-handle" id="sidebarResizeHandle"></div>
        
        <!-- Template Browser renders here via JS -->
      </aside>
      
      <!-- CENTER - Canvas Area -->
      <section class="canvas-area" id="canvasArea">
        <div class="toolbar" id="toolbar">
          <div class="toolbar-group" id="toolbarGroupUndo">
            <button class="tool-btn" id="undoBtn" title="Undo (Ctrl+Z)" disabled>
              <span>â†©ï¸</span>
              <span class="undo-label" id="undoLabel"></span>
            </button>
            <button class="tool-btn" id="redoBtn" title="Redo (Ctrl+Y)" disabled>
              <span>â†ªï¸</span>
              <span class="redo-label" id="redoLabel"></span>
            </button>
          </div>
          <div class="toolbar-group" id="toolbarGroupSnap">
            <label class="snap-toggle" id="snapToggleLabel" title="Snap to Grid (G)">
              <input type="checkbox" id="snapGrid" onchange="toggleSnapGrid(this.checked)">
              <span>ğŸ“ Snap</span>
            </label>
          </div>
          <div class="toolbar-group" id="toolbarGroupIO">
            <button class="tool-btn" id="saveHtmlBtn" title="Save as HTML">ğŸ’¾ HTML</button>
            <button class="tool-btn" id="exportBtn" title="Export JSON (Ctrl+E)">ğŸ“¤ Export</button>
            <button class="tool-btn" id="importBtn" title="Import JSON (Ctrl+I)">ğŸ“¥ Import</button>
          </div>
          <span class="comp-count" id="count">0 components</span>
        </div>
        <div class="viewport" id="viewport">
          <div class="frame" id="canvas">
            <div class="empty" id="empty">
              <div class="empty-icon">ğŸ¨</div>
              <h3>Select a template to start</h3>
              <p>Choose from the sidebar or build from scratch</p>
              <p class="empty-hint">Press <kbd>T</kbd> for quick templates</p>
            </div>
          </div>
        </div>
      </section>
      
      <!-- RIGHT PANEL - Properties Editor -->
      <aside class="panel-right" id="panelRight"
        data-wb="drawerLayout"
        data-position="right"
        data-width="380px"
        data-min-width="1.5rem"
        data-max-width="50vw"
        data-resizable="true"
        data-save-state="true"
        data-toggle-selector="#panelToggle"
        data-handle-selector="#panelResizeHandle">
        <button class="panel-toggle" id="panelToggle" title="Toggle panel (])">
          <span class="toggle-icon" id="panelToggleIcon">â–¶</span>
        </button>
        <div class="panel-collapsed-label" id="panelCollapsedLabel">PROPERTIES</div>
        <div class="panel-resize-handle" id="panelResizeHandle"></div>
        <div class="panel-right-header" id="panelRightHeader">
          <div class="panel-tabs" id="panelTabs">
            <button class="panel-tab active" id="tabTree" onclick="window.switchPanelTab('tree')">ğŸŒ³ Tree</button>
            <button class="panel-tab" id="tabProps" onclick="window.switchPanelTab('props')">âš™ï¸ Properties</button>
          </div>
          <div class="panel-header-actions" id="panelHeaderActions">
            <button class="btn btn-sm btn-danger" id="clearCanvasBtn" title="Clear canvas">Clear</button>
          </div>
        </div>
        <div class="panel-right-list" id="componentList">
          <div class="panel-right-empty" id="panelRightEmpty">
            <div style="font-size:1.5rem;opacity:0.5;margin-bottom:0.5rem">ğŸ¯</div>
            <p>Select a component to edit</p>
          </div>
        </div>
        <!-- Properties Panel -->
        <div id="propsPanel" class="props-panel"></div>
      </aside>
    </div>
  </main>
  
  <footer class="builder-footer" id="builderFooter">
    <div class="footer-left">
      <span id="footerCount">0 components</span>
      <span class="footer-status" id="issueStatus" style="display:none">
        <span class="status-dot status-dot--error"></span>
        <span id="issueCount">0 issues</span>
      </span>
    </div>
    <div class="footer-right">
      <span id="shortcutHint">Press <kbd>?</kbd> for shortcuts</span>
    </div>
  </footer>
  
  <!-- Notes Modal -->
  <div class="notes-modal" id="notesModal">
    <div class="notes-modal-header" id="notesModalHeader">
      <span>ğŸ“ Notes</span>
      <div class="notes-modal-actions" id="notesModalActions">
        <button class="notes-modal-btn" id="notesCopyBtn" onclick="copyNotes()" title="Copy to clipboard">ğŸ“‹</button>
        <button class="notes-modal-btn" id="notesSaveBtn" onclick="saveNotesToFile()" title="Save notes">ğŸ’¾</button>
        <button class="notes-modal-btn" id="notesClearBtn" onclick="clearNotes()" title="Clear all">ğŸ—‘ï¸</button>
        <button class="notes-close-btn" id="notesCloseBtn" onclick="toggleNotesDrawer()" title="Close">âœ•</button>
      </div>
    </div>
    <textarea id="notesArea" placeholder="Add your notes here..." class="notes-textarea"></textarea>
    <div class="notes-modal-status" id="notesStatus"></div>
  </div>
  
  <!-- Notes Backdrop -->
  <div class="notes-backdrop" id="notesBackdrop" onclick="toggleNotesDrawer()"></div>
  
  <!-- Toast -->
  <div class="toast" id="toast"></div>
  
  <!-- Docs/Schema Viewer Modal -->
  <div class="docs-modal" id="docsModal">
    <div class="docs-modal-content">
      <div class="docs-modal-header" id="docsModalHeader">
        <div class="docs-modal-title" id="docsModalTitleContainer">
          <span id="docsModalIcon">ğŸ“–</span>
          <span id="docsModalTitle">Component</span>
        </div>
        <div class="docs-modal-tabs" id="docsModalTabs">
          <button class="docs-tab-btn active" id="docsTabBtn" data-tab="docs" onclick="switchDocsTab('docs')">ğŸ“– Docs</button>
          <button class="docs-tab-btn" id="schemaTabBtn" data-tab="schema" onclick="switchDocsTab('schema')">ğŸ“‹ Schema</button>
        </div>
        <button class="notes-close-btn" id="docsCloseBtn" onclick="closeDocsModal()" title="Close">âœ•</button>
      </div>
      <div class="docs-modal-body" id="docsModalBody">
        <!-- Content loaded dynamically -->
      </div>
    </div>
  </div>
  
  <!-- Keyboard Shortcuts Modal -->
  <div class="shortcuts-modal" id="shortcutsModal">
    <div class="shortcuts-modal-content">
      <div class="shortcuts-modal-header" id="shortcutsModalHeader">
        <span>âŒ¨ï¸ Keyboard Shortcuts</span>
        <button class="notes-close-btn" id="shortcutsCloseBtn" onclick="closeShortcuts()" title="Close">âœ•</button>
      </div>
      <div class="shortcuts-list" id="shortcutsList">
        <div class="shortcuts-group">
          <h4>General</h4>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Z</kbd> <span>Undo</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Y</kbd> <span>Redo</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>S</kbd> <span>Save page</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>E</kbd> <span>Export JSON</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>I</kbd> <span>Import JSON</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>P</kbd> <span>Toggle Preview</span></div>
        </div>
        <div class="shortcuts-group">
          <h4>Components</h4>
          <div class="shortcut-item"><kbd>Delete</kbd> / <kbd>Backspace</kbd> <span>Delete selected</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>D</kbd> <span>Duplicate selected</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>C</kbd> <span>Copy as HTML</span></div>
          <div class="shortcut-item"><kbd>â†‘</kbd> / <kbd>â†“</kbd> <span>Move component</span></div>
          <div class="shortcut-item"><kbd>Escape</kbd> <span>Deselect</span></div>
        </div>
        <div class="shortcuts-group">
          <h4>Panels</h4>
          <div class="shortcut-item"><kbd>\</kbd> <span>Toggle templates sidebar</span></div>
          <div class="shortcut-item"><kbd>]</kbd> <span>Toggle properties panel</span></div>
          <div class="shortcut-item"><kbd>P</kbd> <span>Toggle properties tab</span></div>
          <div class="shortcut-item"><kbd>[</kbd> <span>Toggle both panels</span></div>
          <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>N</kbd> <span>Toggle Notes</span></div>
          <div class="shortcut-item"><kbd>T</kbd> <span>Quick Templates</span></div>
          <div class="shortcut-item"><kbd>G</kbd> <span>Toggle Snap Grid</span></div>
          <div class="shortcut-item"><kbd>?</kbd> <span>Show Shortcuts</span></div>
        </div>
      </div>
    </div>
  </div>
  
  <script type="module" src="../src/builder/index.js"></script>
  <script src="../src/builder/builder-tree.js"></script>
</body>
</html>
