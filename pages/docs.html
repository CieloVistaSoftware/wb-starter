<div id="docs-hero" class="page__hero">
  <h1>üìñ Documentation</h1>
  <p>Browse all documentation, guides, and research papers.</p>
</div>

<div id="docs-container" class="page__section">
  <div id="docs-loading" style="text-align: center; padding: 2rem;">
    <div data-wb="spinner"></div>
    <p style="margin-top: 1rem; color: var(--text-muted);">Loading documentation...</p>
  </div>
</div>

<script>
  // Self-executing function (no module needed)
  (async function loadDocs() {
    const container = document.getElementById('docs-container');
    if (!container) return;
    
    try {
      const res = await fetch('docs/manifest.json');
      if (!res.ok) throw new Error('Failed to fetch manifest');
      const manifest = await res.json();
      
      let html = '';
      
      for (const category of manifest.categories) {
        html += '<div class="docs-category" style="margin-bottom: 2.5rem;">';
        html += '<h2 style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">';
        html += '<span>' + category.icon + '</span>';
        html += '<span>' + category.name + '</span>';
        html += '</h2>';
        html += '<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem;">';
        
        // Handle markdown docs
        if (category.docs) {
          for (const doc of category.docs) {
            html += '<a href="public/doc-viewer.html?file=' + encodeURIComponent(doc.file) + '" ';
            html += 'class="docs-card" target="_blank" ';
            html += 'style="display: block; padding: 1.25rem; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 10px; text-decoration: none; color: inherit; transition: all 0.2s;">';
            html += '<h3 style="margin: 0 0 0.5rem; color: var(--primary); font-size: 1rem;">' + doc.title + '</h3>';
            html += '<p style="margin: 0; font-size: 0.875rem; color: var(--text-muted);">' + doc.description + '</p>';
            html += '</a>';
          }
        }
        
        // Handle page links (like research papers)
        if (category.pages) {
          for (const page of category.pages) {
            html += '<a href="pages/' + page.page + '.html" ';
            html += 'class="docs-card" target="_blank" ';
            html += 'style="display: block; padding: 1.25rem; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 10px; text-decoration: none; color: inherit; transition: all 0.2s;">';
            html += '<h3 style="margin: 0 0 0.5rem; color: var(--primary); font-size: 1rem;">' + page.title + '</h3>';
            html += '<p style="margin: 0; font-size: 0.875rem; color: var(--text-muted);">' + page.description + '</p>';
            html += '</a>';
          }
        }
        
        html += '</div></div>';
      }
      
      container.innerHTML = html;
      
      // Add hover effects
      container.querySelectorAll('.docs-card').forEach(function(card) {
        card.addEventListener('mouseenter', function() {
          card.style.transform = 'translateY(-2px)';
          card.style.borderColor = 'var(--primary)';
          card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
        });
        card.addEventListener('mouseleave', function() {
          card.style.transform = '';
          card.style.borderColor = 'var(--border-color)';
          card.style.boxShadow = '';
        });
      });
      
    } catch (err) {
      console.error('Failed to load docs manifest:', err);
      container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-muted);">' +
        '<p>‚ö†Ô∏è Could not load documentation index.</p>' +
        '<p style="font-size: 0.875rem;">Error: ' + err.message + '</p>' +
        '</div>';
    }
  })();
</script>
