<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WB Behaviors Showcase</title>
  <link rel="stylesheet" href="../src/styles/themes.css">
  <link rel="stylesheet" href="../src/styles/site.css">
  <link rel="stylesheet" href="../src/styles/components.css">
  <link rel="stylesheet" href="../src/styles/behaviors/effects.css">
  <style>
    body {
      padding: 2rem;
      max-width: 100%;
      margin: 0 auto;
      background: var(--bg-color);
      color: var(--text-primary);
    }
    header {
      margin-bottom: 2rem;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    h1 { margin: 0; }
    h3 { 
      margin-top: 3rem; 
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
      color: var(--primary);
    }
    
    /* Two-column layout */
    .resizable-container {
      display: flex;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      overflow: hidden;
    }
    .column {
      padding: 1.5rem;
      background: var(--bg-color);
    }
    .column-left {
      flex: 1;
      min-width: 300px;
      border-right: none;
    }
    .column-right {
      flex: 1;
      min-width: 300px;
      background: var(--bg-primary);
    }
    .resize-handle {
      width: 8px;
      background: var(--border-color);
      cursor: col-resize;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    .resize-handle:hover,
    .resize-handle.dragging {
      background: var(--primary);
    }
    .resize-handle::after {
      content: '‚ãÆ';
      color: var(--text-muted);
      font-size: 1.2rem;
    }
    .resize-handle:hover::after,
    .resize-handle.dragging::after {
      color: white;
    }
    
    .behavior-grid {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    .behavior-card {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      transition: transform 0.2s;
      overflow-wrap: break-word;
      word-wrap: break-word;
      max-width: 100%;
    }
    .behavior-card * {
      max-width: 100%;
    }
    .behavior-card:hover {
      transform: translateY(-2px);
      border-color: var(--primary);
    }
    .behavior-title {
      font-weight: bold;
      margin-bottom: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
    }
    .behavior-code {
      font-family: monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
      background: var(--bg-secondary);
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
    }
    .wb-mdhtml pre,
    .behavior-card code {
      font-size: 0.55rem;
    }
    .wb-mdhtml {
      font-size: 0.55rem;
      max-width: 100%;
      overflow-wrap: break-word;
      word-break: break-word;
    }
    .wb-mdhtml pre {
      max-width: 100%;
      overflow: hidden;
    }
    .demo-area {
      margin-top: 1rem;
      padding: 1.5rem;
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);
      min-height: 80px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: flex-start;
      justify-content: center;
    }
    .demo-row {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: center;
      width: 100%;
    }
    .nav-links {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    .nav-links a {
      text-decoration: none;
      color: var(--text-secondary);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      transition: all 0.2s;
    }
    .nav-links a:hover {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    .spinner-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-align: center;
      margin-top: 0.25rem;
    }
    .spinner-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
    }
    
    /* Info callout */
    .info-callout {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%);
      border: 1px solid var(--primary);
      border-left: 4px solid var(--primary);
      border-radius: var(--radius-md);
      padding: 1rem 1.25rem;
      margin-bottom: 1.5rem;
    }
    .info-callout-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    .info-callout code {
      background: var(--bg-tertiary);
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    .info-callout pre {
      background: var(--bg-tertiary);
      padding: 0.75rem 1rem;
      border-radius: var(--radius-sm);
      margin: 0.75rem 0 0 0;
      font-size: 0.8rem;
      overflow-x: auto;
    }
    .info-callout p {
      margin: 0.5rem 0;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    
    /* Effect demo clickable styles */
    .effect-demo {
      transition: transform 0.2s, background 0.2s;
      display: inline-block; /* Required for transforms to work */
    }
    .effect-demo:hover {
      background: var(--primary) !important;
      color: white !important;
      transform: scale(1.1);
    }
  </style>
</head>
<body>

  <header>
    <div>
      <h1>WB Behaviors Showcase</h1>
      <p>Interactive demo of all available behaviors</p>
    </div>
    <div style="display: flex; gap: 1rem; align-items: center;">
      <wb-codecontrol data-size="sm"</div>
      <wb-themecontrol></div>
    </div>
  </header>

  <div class="nav-links">
    <a href="#semantic">Semantic HTML</a>
    <a href="#ui">UI Components</a>
    <a href="#layout">Layout</a>
    <a href="#utilities">Utilities</a>
    <a href="#effects">Effects</a>
    <a href="code.html">Code Demo</a>
    <a href="cards-showcase.html">Card Demo</a>
  </div>

  <!-- Code Theme Control - Prominent at top -->
  <div style="background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border: 2px solid var(--primary); border-radius: var(--radius-md, 8px); padding: 1rem 1.5rem; margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
    <div>
      <strong style="color: var(--primary); font-size: 1.1rem;">üé® Live Code Theme Preview</strong>
      <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-secondary);">Change ANY dropdown ‚Üí ALL code blocks update instantly. They're synced! Try <code>grayscale</code> for black/white.</p>
    </div>
    <wb-codecontrol data-size="sm" data-show-label="false"</div>
  </div>

  <!-- Auto-Inject Mode Callout -->
  <div class="info-callout">
    <div class="info-callout-header">
      ‚ö° Auto-Inject Mode is Now Default
    </div>
    <p>
      <strong>What changed?</strong> WB v2.0 auto-detects semantic HTML elements like <code>&lt;button&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;details&gt;</code>, and <code>&lt;figure&gt;</code> ‚Äî no <code>data-wb</code> attribute needed.
    </p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1rem;">
      
      <!-- BEFORE column -->
      <div>
        <div style="font-size: 0.85rem; font-weight: 600; color: var(--danger-color); margin-bottom: 0.5rem;">‚ùå BEFORE (Web Behaviors v1.0)</div>
        <pre style="margin: 0; border: 1px solid var(--danger-color);"><code>&lt;!-- Every element needs data-wb --&gt;
&lt;button  
  data-variant="primary"&gt;
  Click Me
&lt;/button&gt;

&lt;input  
  type="text"&gt;

&lt;details &gt;
  &lt;summary&gt;FAQ&lt;/summary&gt;
  &lt;p&gt;Answer here&lt;/p&gt;
&lt;/details&gt;

&lt;figure &gt;
  &lt;img src=&quot;url&quot;&gt;
  &lt;figcaption&gt;Caption&lt;/figcaption&gt;
&lt;/figure&gt;</code></pre>
        <p style="font-size: 0.75rem; color: var(--text-muted); margin: 0.5rem 0 0 0;">
          Verbose, repetitive, easy to forget
        </p>
      </div>
      
      <!-- AFTER column -->
      <div>
        <div style="font-size: 0.85rem; font-weight: 600; color: var(--success-color); margin-bottom: 0.5rem;">‚úÖ AFTER (WB v2.0)</div>
        <pre style="margin: 0; border: 1px solid var(--success-color);"><code>&lt;!-- Just write semantic HTML --&gt;
&lt;button 
  data-variant="primary"&gt;
  Click Me
&lt;/button&gt;

&lt;input 
  type="text"&gt;

&lt;details&gt;
  &lt;summary&gt;FAQ&lt;/summary&gt;
  &lt;p&gt;Answer here&lt;/p&gt;
&lt;/details&gt;

&lt;figure 
  data-img-src=&quot;url&quot; 
  data-caption="Caption"&gt;
&lt;/figure&gt;</code></pre>
        <p style="font-size: 0.75rem; color: var(--text-muted); margin: 0.5rem 0 0 0;">
          Clean, semantic, automatic enhancement
        </p>
      </div>
      
    </div>
    
    <!-- Control -->
    <div style="margin-top: 1rem; font-size: 0.85rem; padding: 0.5rem; background: var(--bg-tertiary); border-radius: var(--radius-sm);">
      <strong>Control:</strong> 
      <code>WB.init({ autoInject: true })</code> (default) or 
      <code>WB.init({ autoInject: false })</code> to disable
    </div>
  </div>

  <!-- Behavior Reference Guide -->
  <div class="info-callout" style="border-color: var(--secondary); border-left-color: var(--secondary);">
    <div class="info-callout-header" style="color: var(--secondary);">
      üìö Complete Behavior Reference
    </div>
    
    <!-- Section 1: Auto-Injected -->
    <div style="margin-top: 1rem;">
      <div style="font-size: 0.9rem; font-weight: 600; color: var(--success-color); margin-bottom: 0.5rem;">üéØ Auto-Injected Behaviors</div>
      <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0 0 0.5rem 0;">These semantic elements use these .js modules that contain one or more behaviors:</p>
      <table style="width: 100%; font-size: 0.8rem; border-collapse: collapse;">
        <tbody>
          <tr>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;button&gt;</code> ‚Üí <strong>button.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;input&gt;</code> ‚Üí <strong>input.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;select&gt;</code> ‚Üí <strong>select.js</strong></td>
          </tr>
          <tr>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;textarea&gt;</code> ‚Üí <strong>textarea.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;details&gt;</code> ‚Üí <strong>details.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;dialog&gt;</code> ‚Üí <strong>dialog.js</strong></td>
          </tr>
          <tr>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;audio&gt;</code> ‚Üí <strong>audio.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;video&gt;</code> ‚Üí <strong>video.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;figure&gt;</code> ‚Üí <strong>figure.js</strong></td>
          </tr>
          <tr>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;table&gt;</code> ‚Üí <strong>table.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;progress&gt;</code> ‚Üí <strong>progressbar.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;kbd&gt;</code> ‚Üí <strong>inline.js</strong></td>
          </tr>
          <tr>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;mark&gt;</code> ‚Üí <strong>inline.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;nav&gt;</code> ‚Üí <strong>navigation.js</strong></td>
            <td style="padding: 0.25rem 0.5rem;"><code>&lt;aside&gt;</code> ‚Üí <strong>navigation.js</strong></td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Section 2: Global Behaviors -->
    <div style="margin-top: 1.25rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
      <div style="font-size: 0.9rem; font-weight: 600; color: var(--primary); margin-bottom: 0.5rem;">üåê Global Behaviors</div>
      <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0 0 0.5rem 0;">Add to <strong>any element</strong> via <code>data-wb</code> attribute ‚Äî click to try:</p>
      <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; font-size: 0.8rem;">
        <button x-ripple style="padding: 0.25rem 0.5rem; cursor: pointer; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);"><code>ripple</code></button>
        <span x-tooltip data-tooltip="I'm a tooltip!" style="padding: 0.25rem 0.5rem; cursor: help; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);"><code>tooltip</code></span>
        <button x-copy data-text="Copied from WB!" style="padding: 0.25rem 0.5rem; cursor: pointer; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);"><code>copy</code></button>
        <div x-draggable style="padding: 0.25rem 0.5rem; cursor: move; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);"><code>draggable</code></div>
        <button x-fullscreen data-target="body" style="padding: 0.25rem 0.5rem; cursor: pointer; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);"><code>fullscreen</code></button>
        <button x-print style="padding: 0.25rem 0.5rem; cursor: pointer; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);"><code>print</code></button>
        <span x-tooltip data-tooltip="Press Ctrl+K to test" style="padding: 0.25rem 0.5rem; cursor: help; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-tertiary);" data-hotkey="ctrl+k" onclick="alert('Hotkey triggered!')"><code>hotkey</code></span>
      </div>
      <p style="font-size: 0.75rem; color: var(--text-muted); margin: 0.5rem 0 0 0;">
        Example: <code>&lt;button x-ripple x-tooltip data-tooltip="Save changes"&gt;</code>
      </p>
    </div>
    
    <!-- Section 3: Effects -->
    <div style="margin-top: 1.25rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
      <div style="font-size: 0.9rem; font-weight: 600; color: var(--accent); margin-bottom: 0.5rem;">‚ú® Animation Effects</div>
      <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0 0 0.5rem 0;">Click to preview ‚Äî add to any element:</p>
      <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; font-size: 0.8rem;">
        <code class="effect-demo" data-effect="bounce" style="cursor: pointer;">bounce</code>
        <code class="effect-demo" data-effect="shake" style="cursor: pointer;">shake</code>
        <code class="effect-demo" data-effect="pulse" style="cursor: pointer;">pulse</code>
        <code class="effect-demo" data-effect="wobble" style="cursor: pointer;">wobble</code>
        <code class="effect-demo" data-effect="tada" style="cursor: pointer;">tada</code>
        <code class="effect-demo" data-effect="flip" style="cursor: pointer;">flip</code>
        <code class="effect-demo" data-effect="rotate" style="cursor: pointer;">rotate</code>
        <code class="effect-demo" data-effect="swing" style="cursor: pointer;">swing</code>
        <code class="effect-demo" data-effect="jello" style="cursor: pointer;">jello</code>
        <code class="effect-demo" data-effect="heartbeat" style="cursor: pointer;">heartbeat</code>
        <code class="effect-demo" data-effect="flash" style="cursor: pointer;">flash</code>
        <code class="effect-demo" data-effect="rubberband" style="cursor: pointer;">rubberband</code>
      </div>
    </div>
    
    <!-- Section 4: Explicit Behaviors -->
    <div style="margin-top: 1.25rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
      <div style="font-size: 0.9rem; font-weight: 600; color: var(--warning-color); margin-bottom: 0.5rem;">üì¶ Explicit Behaviors</div>
      <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0 0 0.5rem 0;">No matching HTML element exists, so <code>data-wb</code> (Web Behaviors) attribute is required:</p>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 0.75rem; font-size: 0.8rem;">
        <div>
          <strong style="color: var(--text-primary);">Feedback</strong><br>
          <span style="color: var(--text-secondary);">spinner, badge, toast, notify, avatar, chip, alert, skeleton, breadcrumb</span>
        </div>
        <div>
          <strong style="color: var(--text-primary);">Cards</strong><br>
          <span style="color: var(--text-secondary);">card, cardimage, cardvideo, cardprofile, cardpricing, cardstats, +12 more</span>
        </div>
        <div>
          <strong style="color: var(--text-primary);">Layout</strong><br>
          <span style="color: var(--text-secondary);">grid, stack, cluster, masonry, sidebar-layout, drawer-layout, frame, reel</span>
        </div>
        <div>
          <strong style="color: var(--text-primary);">Overlays</strong><br>
          <span style="color: var(--text-secondary);">modal, popover, drawer, lightbox, offcanvas, sheet, confirm, prompt</span>
        </div>
        <div>
          <strong style="color: var(--text-primary);">Navigation</strong><br>
          <span style="color: var(--text-secondary);">tabs, dropdown, accordion, collapse, pagination, steps, menu, treeview</span>
        </div>
        <div>
          <strong style="color: var(--text-primary);">Data Display</strong><br>
          <span style="color: var(--text-secondary);">code, pre, json, timeline, stat, list, empty, rating</span>
        </div>
      </div>
    </div>
    
  </div>

  <!-- Resizable Two-Column Layout -->
  <div class="resizable-container">
    <div class="column column-left" id="column-left">
  <h3 id="semantic">1. Semantic HTML & Forms</h3>
  <div class="behavior-grid">
    
    <div class="behavior-card">
      <div class="behavior-title">Button <span class="behavior-code">&lt;button&gt;</span></div>
      <div class="demo-area">
        <div class="demo-row">
          <button
            data-variant="primary">Primary</button>
          <button
            data-variant="secondary">Secondary</button>
          <button
            data-variant="outline">Outline</button>
          <button
            data-variant="ghost">Ghost</button>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Input <span class="behavior-code">&lt;input&gt;</span></div>
      <div class="demo-area">
        <input
          placeholder="Default input"
          style="width: 100%">
        <input
          data-icon="üîç"
          placeholder="With icon"
          style="width: 100%">
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Switch <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div class="demo-row">
          <label style="display:flex; gap:0.5rem; align-items:center;">
            <wb-switch type="checkbox"
              id="demo-notifications-switch">
            <span>Notifications</span>
          </label>
          <label style="display:flex; gap:0.5rem; align-items:center;">
            <wb-switch type="checkbox"
              id="demo-dark-mode-switch"
              checked>
            <span>Dark Mode</span>
          </label>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Badge <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div class="demo-row">
          <wb-badge variant="default">Default</span>
          <wb-badge variant="primary">Primary</span>
          <wb-badge variant="success">Success</span>
          <wb-badge variant="warning">Warning</span>
          <wb-badge variant="danger">Error</span>
        </div>
        <div class="demo-row">
          <wb-badge variant="info"
            pill="true">Pill</span>
          <wb-badge variant="success"
            dot="true"></span>
          <span>Status Dot</span>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Details <span class="behavior-code">&lt;details&gt;</span></div>
      <div class="demo-area" style="display:block; padding: 0.5rem;">
        <details
          style="margin-bottom: 0.5rem;">
          <summary>What is WB Behaviors?</summary>
          <p>WB is a lightweight, behavior-driven JavaScript library that enhances HTML with interactive capabilities using data attributes.</p>
        </details>
        <details>
          <summary>How do I use it?</summary>
          <p>Simply add <code></code> to any HTML element. No initialization code required!</p>
        </details>
      </div>
    </div>

  </div>

  <!-- 2. UI COMPONENTS -->
  <h3 id="ui">2. UI Components</h3>
  <div class="behavior-grid">

    <div class="behavior-card">
      <div class="behavior-title">Spinner <span class="behavior-code"></span></div>
      <div class="demo-area">
        <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 0 0 0.5rem 0; width: 100%;">
          <strong>Speeds:</strong> slow (2s), medium (1.2s), fast (0.6s)
        </p>
        <div class="demo-row" style="gap: 1.5rem; justify-content: center;">
          <div class="spinner-group">
            <wb-spinner size="sm"
              color="primary"
              speed="slow"></div>
            <span class="spinner-label">slow / sm</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="md"
              color="success"
              speed="medium"></div>
            <span class="spinner-label">medium / md</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="lg"
              color="warning"
              speed="fast"></div>
            <span class="spinner-label">fast / lg</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="xl"
              color="error"
              speed="medium"></div>
            <span class="spinner-label">medium / xl</span>
          </div>
        </div>
        <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 1rem 0 0.5rem 0; width: 100%;">
          <strong>All Sizes:</strong> xs, sm, md, lg, xl
        </p>
        <div class="demo-row" style="gap: 1.5rem; justify-content: center; align-items: flex-end;">
          <div class="spinner-group">
            <wb-spinner size="xs"
              color="info"
              speed="medium"></div>
            <span class="spinner-label">xs</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="sm"
              color="secondary"
              speed="medium"></div>
            <span class="spinner-label">sm</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="md"
              color="#ec4899"
              speed="medium"></div>
            <span class="spinner-label">md</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="lg"
              color="primary"
              speed="medium"></div>
            <span class="spinner-label">lg</span>
          </div>
          <div class="spinner-group">
            <wb-spinner size="xl"
              color="success"
              speed="medium"></div>
            <span class="spinner-label">xl</span>
          </div>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Progress <span class="behavior-code">&lt;progress&gt;</span></div>
      <div class="demo-area" style="display:flex; flex-direction:column; gap:1rem; width: 100%;">
        <div
          id="progress-uploading"
          data-value="0"
          data-label="Uploading..."
          data-variant="primary"></div>
        <div
          id="progress-processing"
          data-value="0"
          data-label="Processing"
          data-striped="true"
          data-animated="true"
          data-variant="warning"></div>
        <div
          data-value="100"
          data-label="Complete"
          data-variant="success"></div>
        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0;">
          ‚è±Ô∏è Upload resets every 8s, Processing resets every 5s
        </p>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Avatar <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div class="demo-row">
          <wb-avatar initials="JD"
            status="online"></div>
          <wb-avatar src="https://i.pravatar.cc/100?u=5"
            status="busy"></div>
          <wb-avatar initials="WB"
            size="lg"
            status="away"></div>
          <wb-avatar initials="XL"
            size="xl"
            status="offline"></div>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Tooltip <span class="behavior-code">x-tooltip</span></div>
      <div class="demo-area">
        <div class="demo-row" style="justify-content: center; width: 100%;">
          <button
            x-tooltip x-ripple
            data-tooltip="I am a tooltip on top!"
            data-tooltip-position="top"
            style="padding:0.5rem 1rem; background:var(--bg-tertiary); color:var(--text-primary); border:1px solid var(--border-color); border-radius:4px; cursor:pointer;">
            Top
          </button>
          <button
            x-tooltip x-ripple
            data-tooltip="I am a tooltip on right!"
            data-tooltip-position="right"
            style="padding:0.5rem 1rem; background:var(--bg-tertiary); color:var(--text-primary); border:1px solid var(--border-color); border-radius:4px; cursor:pointer;">
            Right
          </button>
          <button
            x-tooltip x-ripple
            data-tooltip="I am a tooltip on bottom!"
            data-tooltip-position="bottom"
            style="padding:0.5rem 1rem; background:var(--bg-tertiary); color:var(--text-primary); border:1px solid var(--border-color); border-radius:4px; cursor:pointer;">
            Bottom
          </button>
          <button
            x-tooltip x-ripple
            data-tooltip="I am a tooltip on left!"
            data-tooltip-position="left"
            style="padding:0.5rem 1rem; background:var(--bg-tertiary); color:var(--text-primary); border:1px solid var(--border-color); border-radius:4px; cursor:pointer;">
            Left
          </button>
        </div>
        <p style="text-align: center; width: 100%; margin-top: 1rem;">
          <span
            x-tooltip
            data-tooltip="Inline tooltips work too!"
            style="text-decoration: underline; cursor: help;">Hover me</span> for inline help.
        </p>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Toast & Notify <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div class="demo-row">
          <button
            x-toast
            data-message="Action saved successfully!"
            data-type="success"
            class="wb-button">
            Show Toast
          </button>
          <button
            x-notify
            data-message="New notification received"
            class="wb-button">
            Show Notify
          </button>
        </div>
      </div>
    </div>

  </div>

  <!-- 3. LAYOUT -->
  <h3 id="layout">3. Layout</h3>
  <div class="behavior-grid">

    <div class="behavior-card">
      <div class="behavior-title">Stack <span class="behavior-code">x-stack</span></div>
      <div class="demo-area" style="display:block">
        <div
          x-stack
          data-gap="sm">
          <div style="background:var(--bg-tertiary); padding:0.5rem; border-radius: 4px;">Item 1</div>
          <div style="background:var(--bg-tertiary); padding:0.5rem; border-radius: 4px;">Item 2</div>
          <div style="background:var(--bg-tertiary); padding:0.5rem; border-radius: 4px;">Item 3</div>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Cluster <span class="behavior-code">x-cluster</span></div>
      <div class="demo-area" style="display:block">
        <div
          x-cluster
          data-gap="xs">
          <wb-badge>JavaScript</span>
          <wb-badge>HTML</span>
          <wb-badge>CSS</span>
          <wb-badge>Web Components</span>
          <wb-badge>Design</span>
          <wb-badge>UI/UX</span>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Grid <span class="behavior-code">x-grid</span></div>
      <div class="demo-area" style="display:block">
        <wb-grid data-columns="2" data-gap="sm"
          <div style="background:var(--bg-tertiary); padding:1rem; text-align:center; border-radius: 4px;">1</div>
          <div style="background:var(--bg-tertiary); padding:1rem; text-align:center; border-radius: 4px;">2</div>
          <div style="background:var(--bg-tertiary); padding:1rem; text-align:center; border-radius: 4px;">3</div>
          <div style="background:var(--bg-tertiary); padding:1rem; text-align:center; border-radius: 4px;">4</div>
        </div>
      </div>
    </div>

  </div>

  <!-- 4. UTILITIES -->
  <h3 id="utilities">4. Utilities</h3>
  <div class="behavior-grid">

    <div class="behavior-card">
      <div class="behavior-title">Copy <span class="behavior-code">x-copy</span></div>
      <div class="demo-area">
        <div style="display: flex; width: 100%; gap: 0.5rem;">
          <input
            id="copy-target"
            value="Copy this text!"
            style="flex: 1; padding: 0.5rem; border-radius: 4px; border: 1px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
          <button
            x-copy x-ripple
            data-target="#copy-target"
            style="padding:0.5rem 1rem; background:var(--primary); color:white; border:none; border-radius:4px; cursor:pointer; overflow:hidden; position:relative;">üìã Copy</button>
        </div>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Ripple <span class="behavior-code">x-ripple</span></div>
      <div class="demo-area">
        <button
          x-ripple
          style="padding:1rem 2rem; background:var(--primary); color:white; border:none; border-radius:4px; cursor:pointer; overflow:hidden; position:relative; font-size: 1rem;">
          Click for Ripple Effect
        </button>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Confetti <span class="behavior-code">x-confetti</span></div>
      <div class="demo-area">
        <button
          x-confetti
          data-count="100"
          data-label="Celebrate!">üéâ</button>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Typewriter <span class="behavior-code">x-typewriter</span></div>
      <div class="demo-area">
        <div style="display: flex; flex-direction: column; gap: 1rem; align-items: flex-start;">
          <span
            id="typewriter-demo"
            x-typewriter
            data-text="Hello! I am typing this text out character by character using WB Behaviors."
            data-speed="50"
            style="font-family: monospace; font-size: 1.1rem; color: var(--primary);"></span>
          <button
            class="wb-button wb-button--sm wb-button--secondary"
            onclick="document.getElementById('typewriter-demo').wbTypewriter.type()">Restart Effect</button>
        </div>
      </div>
    </div>

  </div>

  <!-- 5. EFFECTS -->
  <h3 id="effects">5. Effects</h3>
  <div class="behavior-grid">

    <div class="behavior-card">
      <div class="behavior-title">Bounce <span class="behavior-code">x-bounce</span></div>
      <div class="demo-area">
        <button
          x-bounce
          style="width:60px; height:60px; background:var(--accent, #f472b6); border-radius:50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
          Click
        </button>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Pulse <span class="behavior-code">x-pulse</span></div>
      <div class="demo-area">
        <button
          x-pulse
          style="width:60px; height:60px; background:var(--success-color); border-radius:50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
          Click
        </button>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Shake <span class="behavior-code">x-shake</span></div>
      <div class="demo-area">
        <button
          x-shake
          style="padding: 0.75rem 1.5rem; background:var(--danger-color); color: white; border-radius: 4px; border: none; cursor: pointer;">
          Shake Me
        </button>
      </div>
    </div>

    <div class="behavior-card">
      <div class="behavior-title">Rainbow <span class="behavior-code">x-rainbow</span></div>
      <div class="demo-area">
        <h3
          x-rainbow
          style="font-size: 1.5rem; margin: 0;">Magical Text</h3>
      </div>
    </div>

  </div>

    </div><!-- end column-left -->
    
    <div class="resize-handle" id="resize-handle"></div>
    
    <div class="column column-right" id="column-right">
  <!-- 6. MEDIA -->
  <h3 id="media">6. Media</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Audio <span class="behavior-code">&lt;audio&gt;</span></div>
      <div class="demo-area">
        <wb-audio data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" data-controls="true"</div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Video <span class="behavior-code">&lt;video&gt;</span></div>
      <div class="demo-area">
        <video
          controls
          width="300"
          src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"></video>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Figure <span class="behavior-code">&lt;figure&gt;</span></div>
      <div class="demo-area" style="flex-direction: row; flex-wrap: wrap; gap: 1.5rem; justify-content: center;">
        
        <!-- Full example -->
        <div
          x-tooltip
          data-tooltip="Full syntax: data-img-src, data-alt, and data-caption. The img and figcaption are auto-generated from attributes. Zero child tags needed!"
          data-tooltip-position="top"
          style="width: 150px;">
          <figure
            data-img-src="https://picsum.photos/150/100?random=1"
            data-alt="Mountain landscape"
            data-caption="Full syntax">
          </figure>
        </div>
        
        <!-- Minimal example -->
        <div
          x-tooltip
          data-tooltip="Minimal syntax: only data-img-src required. Alt text auto-defaults to the src URL when omitted. Caption is optional."
          data-tooltip-position="top"
          style="width: 150px;">
          <figure
            data-img-src="https://picsum.photos/150/100?random=2">
          </figure>
        </div>
        
        <!-- Lightbox example -->
        <div
          x-tooltip
          data-tooltip="Lightbox mode: add data-lightbox to enable click-to-fullscreen. Opens a modal overlay with the full-size image. Press ESC or click outside to close."
          data-tooltip-position="top"
          style="width: 150px;">
          <figure
            data-img-src="https://picsum.photos/150/100?random=3"
            data-caption="Click me!"
            data-lightbox>
          </figure>
        </div>
        
        <!-- Zoom example -->
        <div
          x-tooltip
          data-tooltip="Zoom mode: add data-zoom for hover-to-scale effect. Image scales to 1.05x on mouseenter, returns to normal on mouseleave. Great for galleries."
          data-tooltip-position="top"
          style="width: 150px;">
          <figure
            data-img-src="https://picsum.photos/150/100?random=4"
            data-caption="Hover me!"
            data-zoom>
          </figure>
        </div>
        
        <!-- Overlay caption example -->
        <div
          x-tooltip
          data-tooltip="Overlay caption: data-caption-position='overlay' places caption over the image with a gradient background. Perfect for hero images and cards."
          data-tooltip-position="top"
          style="width: 150px;">
          <figure
            data-img-src="https://picsum.photos/150/100?random=5"
            data-caption="Overlay caption"
            data-caption-position="overlay">
          </figure>
        </div>
        
        <!-- Lazy loading example -->
        <div
          x-tooltip
          data-tooltip="Lazy loading: add data-lazy for native browser lazy loading. Image only loads when scrolled into viewport. Improves page performance."
          data-tooltip-position="top"
          style="width: 150px;">
          <figure
            data-img-src="https://picsum.photos/150/100?random=6"
            data-caption="Lazy loaded"
            data-lazy>
          </figure>
        </div>
        
      </div>
    </div>
  </div>

  <!-- 7. NAVIGATION -->
  <h3 id="navigation">7. Navigation</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Breadcrumb <span class="behavior-code">x-breadcrumb</span></div>
      <div class="demo-area">
        <nav
          x-breadcrumb
          data-items="Home, Products, Electronics, Laptops"></nav>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Tabs <span class="behavior-code"></span></div>
      <div class="demo-area">
        <wb-tabs>
          <div data-tab="Tab 1">Content for Tab 1</div>
          <div data-tab="Tab 2">Content for Tab 2</div>
          <div data-tab="Tab 3">Content for Tab 3</div>
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Dropdown <span class="behavior-code"></span></div>
      <div class="demo-area">
        <wb-dropdown label="Options">
          <a href="#">Profile</a>
          <a href="#">Settings</a>
          <a href="#">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <!-- 8. INTERACTIVE -->
  <h3 id="interactive">8. Interactive</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Collapse <span class="behavior-code">x-collapse</span></div>
      <div class="demo-area">
        <button
          x-collapse
          data-target="#collapse-content">Toggle Content</button>
        <div
          id="collapse-content"
          style="margin-top: 1rem; padding: 1rem; background: var(--bg-tertiary);">
          This content can be collapsed and expanded.
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Dialog <span class="behavior-code">&lt;dialog&gt;</span></div>
      <div class="demo-area">
        <button onclick="document.getElementById('demo-dialog').showModal()">Open Dialog</button>
        <dialog
          id="demo-dialog">
          <h3>Hello!</h3>
          <p>This is a modal dialog.</p>
          <button onclick="this.closest('dialog').close()">Close</button>
        </dialog>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Drawer <span class="behavior-code"></span></div>
      <div class="demo-area" style="height: 200px; overflow: hidden; border: 1px solid var(--border-color);">
        <div
          data-position="left"
          data-width="150px"
          style="height: 100%;">
          <div style="background: var(--bg-tertiary); height: 100%; padding: 1rem;">Sidebar</div>
          <div style="padding: 1rem;">Main Content</div>
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Toggle <span class="behavior-code"></span></div>
      <div class="demo-area">
        <button
          data-target="#toggle-box"
          data-class="active">Toggle Class</button>
        <div
          id="toggle-box"
          style="width: 50px; height: 50px; background: red; margin-top: 1rem; transition: all 0.3s;"></div>
        <style>#toggle-box.active { background: green; transform: rotate(45deg); }</style>
      </div>
    </div>
  </div>

  <!-- 9. FORMS -->
  <h3 id="forms">9. Forms</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Checkbox <span class="behavior-code">&lt;input type="checkbox"&gt;</span></div>
      <div class="demo-area">
        <label>
          <input
            type="checkbox"> Option 1</label>
        <label>
          <input
            type="checkbox"
            checked> Option 2</label>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Radio <span class="behavior-code">&lt;input type="radio"&gt;</span></div>
      <div class="demo-area">
        <label>
          <input
            type="radio"
            name="r1"> Radio 1</label>
        <label>
          <input
            type="radio"
            name="r1"
            checked> Radio 2</label>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Range <span class="behavior-code">&lt;input type="range"&gt;</span></div>
      <div class="demo-area">
        <input
          type="range"
          min="0"
          max="100"
          value="50">
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Select <span class="behavior-code">&lt;select&gt;</span></div>
      <div class="demo-area">
        <select>
          <option>Option 1</option>
          <option>Option 2</option>
          <option>Option 3</option>
        </select>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Textarea <span class="behavior-code">&lt;textarea&gt;</span></div>
      <div class="demo-area">
        <textarea
          placeholder="Type something..."></textarea>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Rating <span class="behavior-code"></span></div>
      <div class="demo-area">
        <wb-rating value="3"
          max="5"></div>
      </div>
    </div>
  </div>

  <!-- 10. ADVANCED LAYOUT -->
  <h3 id="advanced-layout">10. Advanced Layout</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Masonry <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div
          data-columns="3"
          data-gap="0.5rem"
          style="width: 100%">
          <div style="background: #333; height: 50px;"></div>
          <div style="background: #444; height: 80px;"></div>
          <div style="background: #555; height: 40px;"></div>
          <div style="background: #666; height: 60px;"></div>
          <div style="background: #777; height: 90px;"></div>
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Switcher <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div
          data-threshold="200px">
          <div style="background: #333; padding: 1rem;">Item 1</div>
          <div style="background: #444; padding: 1rem;">Item 2</div>
          <div style="background: #555; padding: 1rem;">Item 3</div>
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Frame <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div
          data-ratio="16/9"
          style="width: 100%; background: #000;">
          <img
            src="https://picsum.photos/400/300"
            alt="Cover">
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Reel <span class="behavior-code"></span></div>
      <div class="demo-area">
        <div
          data-item-width="100px">
          <div style="background: #333; height: 80px; width: 100px;">1</div>
          <div style="background: #444; height: 80px; width: 100px;">2</div>
          <div style="background: #555; height: 80px; width: 100px;">3</div>
          <div style="background: #666; height: 80px; width: 100px;">4</div>
          <div style="background: #777; height: 80px; width: 100px;">5</div>
        </div>
      </div>
    </div>
  </div>

  <!-- 11. UNIVERSAL -->
  <h3 id="universal">11. Universal</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Draggable <span class="behavior-code">x-draggable</span></div>
      <div class="demo-area" style="height: 150px; position: relative;">
        <div
          x-draggable
          style="width: 50px; height: 50px; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; cursor: move;">Drag</div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Resizable <span class="behavior-code">x-resizable</span></div>
      <div class="demo-area">
        <div
          x-resizable
          style="width: 100px; height: 100px; background: var(--bg-tertiary); border: 1px solid var(--border-color); overflow: hidden;">Resize Me</div>
      </div>
    </div>
  </div>

  <!-- 12. MORE COMPONENTS -->
  <h3 id="more">12. More Components</h3>
  <div class="behavior-grid">
    <div class="behavior-card">
      <div class="behavior-title">Sidebar Layout <span class="behavior-code"></span></div>
      <div class="demo-area" style="height: 200px; border: 1px solid var(--border-color);">
        <div
          data-sidebar-width="100px">
          <div style="background: var(--bg-tertiary); padding: 1rem;">Side</div>
          <div style="padding: 1rem;">Main Content Area</div>
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Imposter <span class="behavior-code"></span></div>
      <div class="demo-area" style="height: 150px; position: relative;">
        <div
          style="background: rgba(0,0,0,0.5); color: white; padding: 1rem; border-radius: 4px;">
          I am centered over everything!
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Alert <span class="behavior-code"></span></div>
      <div class="demo-area">
        <wb-alert variant="info"
          style="padding: 1rem; background: var(--bg-tertiary); border-left: 4px solid var(--primary); width: 100%;">
          <strong>Info:</strong> This is an alert message.
        </div>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Keyboard <span class="behavior-code">&lt;kbd&gt;</span></div>
      <div class="demo-area">
        <p>Press <kbd>Ctrl</kbd> + <kbd>C</kbd> to copy.</p>
      </div>
    </div>
    <div class="behavior-card">
      <div class="behavior-title">Highlight <span class="behavior-code">&lt;mark&gt;</span></div>
      <div class="demo-area">
        <p>This is <mark>highlighted</mark> text.</p>
      </div>
    </div>
  </div>
    </div><!-- end column-right -->
  </div><!-- end resizable-container -->

  <script type="module">
    import WB from "../src/core/wb-lazy.js";
    import { createToast } from "../src/wb-viewmodels/feedback.js";
    
    // Initialize WB in autoinject mode
    await WB.init({ autoInject: true });

    // Code Example Configuration
    const codeDisplayConfig = {
      format: 'multiline',      // 'multiline' or 'inline'
      showAutoinject: true,     // Show semantic HTML format
      showNotes: true,          // Show explanatory notes
      codeSize: 'xs'            // xs, sm, md, lg, xl
    };

    // Auto-inject mapping: data-wb value -> { element, note }
    const autoinjectMap = {
      'button': { element: 'button', note: 'Auto-injects via <button>. Explicit: ' },
      'card': { element: 'article', note: 'Auto-injects via <article>. Explicit:' },
      'details': { element: 'details', note: 'Auto-injects via <details>. Explicit: ' },
      'dialog': { element: 'dialog', note: 'Auto-injects via <dialog>. Explicit:' },
      'input': { element: 'input', note: 'Auto-injects via <input>. Explicit: ' },
      'textarea': { element: 'textarea', note: 'Auto-injects via <textarea>. Explicit:' },
      'select': { element: 'select', note: 'Auto-injects via <select>. Explicit:' },
      'checkbox': { element: 'input type="checkbox"', note: 'Auto-injects via <input type="checkbox">. Explicit:' },
      'radio': { element: 'input type="radio"', note: 'Auto-injects via <input type="radio">. Explicit:' },
      'range': { element: 'input type="range"', note: 'Auto-injects via <input type="range">. Explicit:' },
      'switch': { element: null, note: 'No auto-inject. Use:', noAutoInject: true },
      'audio': { element: 'audio', note: 'Auto-injects via <audio>. Explicit: ' },
      'video': { element: 'video', note: 'Auto-injects via <video>. Explicit: ' },
      'figure': { element: 'figure', note: 'Auto-injects via <figure>. Explicit: ' },
      'navbar': { element: 'nav', note: 'Auto-injects via <nav>. Explicit:' },
      'sidebar': { element: 'aside', note: 'Auto-injects via <aside>. Explicit:' },
      'table': { element: 'table', note: 'Auto-injects via <table>. Explicit:' },
      'progressbar': { element: 'progress', note: 'Auto-injects via <progress>. Explicit:' },
      'kbd': { element: 'kbd', note: 'Auto-injects via <kbd>. Explicit: x-kbd' },
      'mark': { element: 'mark', note: 'Auto-injects via <mark>. Explicit:' },
    };

    // Format HTML with ALL attributes on new lines with proper nesting indentation
    function formatHtmlMultiline(html) {
      let result = '';
      let depth = 0;
      const baseIndent = '  '; // 2 spaces per level
      
      // Format a single attribute - handle boolean attributes properly
      function formatAttribute(name, value, indentLevel) {
        const indent = baseIndent.repeat(indentLevel);
        
        // Boolean attributes (no value or empty value) - just show the name
        if (value === undefined || value === '') {
          return indent + name;
        }
        
        return indent + name + '="' + value + '"';
      }
      
      // Simple tokenizer to process HTML
      let i = 0;
      while (i < html.length) {
        // Skip whitespace between tags
        if (html[i] === '\n' || html[i] === '\r') {
          i++;
          continue;
        }
        
        // Check for closing tag
        if (html.slice(i, i + 2) === '</') {
          const closeEnd = html.indexOf('>', i);
          if (closeEnd !== -1) {
            depth = Math.max(0, depth - 1);
            const tag = html.slice(i, closeEnd + 1);
            result += '\n' + baseIndent.repeat(depth) + tag;
            i = closeEnd + 1;
            continue;
          }
        }
        
        // Check for opening tag
        if (html[i] === '<' && html[i + 1] !== '/') {
          const tagEnd = html.indexOf('>', i);
          if (tagEnd !== -1) {
            const fullTag = html.slice(i, tagEnd + 1);
            const endsWithSlash = fullTag.endsWith('/>');
            const isVoidElement = /^<(img|input|br|hr|meta|link|area|base|col|embed|source|track|wbr)\b/i.test(fullTag);
            const isSelfClosing = endsWithSlash || isVoidElement;
            
            // Extract tag name
            const tagNameMatch = fullTag.match(/^<([a-zA-Z][a-zA-Z0-9]*)/);
            const tagName = tagNameMatch ? tagNameMatch[1] : '';
            
            // Extract attributes - only use -2 if it actually ends with />
            const sliceEnd = endsWithSlash ? -2 : -1;
            const attrString = fullTag.slice(tagName.length + 1, sliceEnd).trim();
            
            // Parse attributes properly handling quoted values
            const attributes = [];
            const attrRegex = /([a-zA-Z_:][a-zA-Z0-9_:.-]*)(?:\s*=\s*(?:"([^"]*)"|'([^']*)'|([^\s>]+)))?/g;
            let attrMatch;
            while ((attrMatch = attrRegex.exec(attrString)) !== null) {
              const name = attrMatch[1];
              const value = attrMatch[2] ?? attrMatch[3] ?? attrMatch[4];
              attributes.push({ name, value });
            }
            
            // Build formatted tag
            const currentIndent = baseIndent.repeat(depth);
            const attrIndentLevel = depth + 1;
            
            if (attributes.length === 0) {
              result += (result ? '\n' : '') + currentIndent + `<${tagName}` + (endsWithSlash ? ' />' : '>');
            } else {
              // ALL attributes on new lines with wrapping for long values
              const formattedAttrs = attributes
                .map(attr => formatAttribute(attr.name, attr.value, attrIndentLevel))
                .join('\n');
              result += (result ? '\n' : '') + currentIndent + `<${tagName}\n${formattedAttrs}` + (endsWithSlash ? ' />' : '>');
            }
            
            if (!isSelfClosing) {
              depth++;
            }
            
            i = tagEnd + 1;
            continue;
          }
        }
        
        // Handle text content
        const nextTag = html.indexOf('<', i);
        if (nextTag === -1) {
          const text = html.slice(i).trim();
          if (text) {
            result += '\n' + baseIndent.repeat(depth) + text;
          }
          break;
        } else {
          const text = html.slice(i, nextTag).trim();
          if (text) {
            result += '\n' + baseIndent.repeat(depth) + text;
          }
          i = nextTag;
        }
      }
      
      return result.trim();
    }

    // Transform HTML to autoinject format
    function transformToAutoinject(html, behaviorName) {
      const primaryBehavior = (behaviorName || '').split(' ')[0];
      
      // If no behavior name found, return generic note
      if (!primaryBehavior) {
        return { html, note: '‚ÑπÔ∏è Semantic HTML - auto-styled by Web Behaviors (WB)' };
      }
      
      const mapping = autoinjectMap[primaryBehavior];
      
      // Check if the HTML tag matches the auto-inject element
      // Extract tag name from HTML string
      const tagMatch = html.match(/^<([a-zA-Z0-9-]+)/);
      const tagName = tagMatch ? tagMatch[1].toLowerCase() : '';
      
      // If mapping exists but tag doesn't match (e.g. div vs audio), treat as explicit
      if (mapping && mapping.element && tagName !== mapping.element.toLowerCase()) {
         return { html, note: `‚ÑπÔ∏è Explicit behavior (tag mismatch). Use:` };
      }
      
      if (!mapping || mapping.noAutoInject || !codeDisplayConfig.showAutoinject) {
        return { html, note: `‚ÑπÔ∏è Explicit behavior. Use:` };
      }

      // Remove data-wb attribute for autoinject format
      let transformed = html.replace(/\s*]*"/g, '');
      
      // Clean up: collapse multiple newlines into single newline
      transformed = transformed.replace(/\n\s*\n/g, '\n');
      
      return { 
        html: transformed, 
        note: `‚ÑπÔ∏è ${mapping.note}` 
      };
    }

    // Get behavior name from card title
    function getBehaviorFromCard(card) {
      const codeSpan = card.querySelector('.behavior-code');
      if (codeSpan) {
        const text = codeSpan.textContent;
        
        // Check for data-wb pattern first
        const wbMatch = text.match(/data-wb="([^"]+)"/);
        if (wbMatch) return wbMatch[1];
        
        // Check for <tagname> pattern (semantic HTML)
        const tagMatch = text.match(/<([a-z]+)/);
        if (tagMatch) {
          const tagName = tagMatch[1];
          // Map HTML tags to behavior names
          const tagToBehavior = {
            'button': 'button',
            'input': 'input',
            'textarea': 'textarea',
            'select': 'select',
            'details': 'details',
            'dialog': 'dialog',
            'figure': 'figure',
            'audio': 'audio',
            'video': 'video',
            'table': 'table',
            'progress': 'progressbar',
            'kbd': 'kbd',
            'mark': 'mark',
            'nav': 'navbar',
            'aside': 'sidebar'
          };
          return tagToBehavior[tagName] || tagName;
        }
        
        // Check for <input type="..."> pattern
        const inputTypeMatch = text.match(/type="([^"]+)"/);
        if (inputTypeMatch) {
          return inputTypeMatch[1]; // checkbox, radio, range
        }
      }
      return null;
    }

    // 1. Show HTML Code below each card (create mdhtml containers FIRST, before scanning)
    const mdContainers = [];
    document.querySelectorAll('.behavior-card').forEach(card => {
      const demoArea = card.querySelector('.demo-area');
      if (demoArea) {
        // Get HTML BEFORE any behaviors are initialized
        let html = demoArea.innerHTML;
        
        // Get behavior name for this card
        const behaviorName = getBehaviorFromCard(card);
        
        // Simple formatting to remove excessive indentation
        const lines = html.split('\n');
        const firstLine = lines.find(l => l.trim().length > 0);
        let baseIndent = 0;
        if (firstLine) {
          baseIndent = firstLine.search(/\S/);
        }
        
        let formattedHtml = lines.map(line => {
          if (line.trim().length === 0) return '';
          if (line.length >= baseIndent) {
            return line.substring(baseIndent);
          }
          return line.trim();
        }).filter(l => l !== null).join('\n').trim();

        // Transform to autoinject format and get note
        const { html: transformedHtml, note } = transformToAutoinject(formattedHtml, behaviorName);

        // Format ALL attributes on new lines
        const finalHtml = formatHtmlMultiline(transformedHtml);

        const mdContainer = document.createElement('div');
        mdContainer.dataset.wb = 'mdhtml';
        mdContainer.dataset.size = codeDisplayConfig.codeSize;
        mdContainer.style.marginTop = '1rem';
        mdContainer.textContent = '```html\n' + finalHtml + '\n```';
        
        card.appendChild(mdContainer);
        mdContainers.push(mdContainer);

        // Add code controls row (theme dropdown + note)
        const controlsRow = document.createElement('div');
        controlsRow.className = 'code-controls-row';
        controlsRow.style.cssText = 'display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem; flex-wrap: wrap; gap: 0.5rem;';
        
        // Add compact codecontrol dropdown (xs size)
        const codeControl = document.createElement('div');
        codeControl.dataset.wb = 'codecontrol';
        codeControl.dataset.showLabel = 'false';
        codeControl.dataset.showCategory = 'false';
        codeControl.dataset.size = 'xs';
        controlsRow.appendChild(codeControl);

        // Add note in xs font
        if (codeDisplayConfig.showNotes) {
          const noteEl = document.createElement('span');
          noteEl.className = 'code-note';
          noteEl.style.cssText = 'font-size: 0.7rem; color: var(--text-muted); opacity: 0.8;';
          noteEl.textContent = note;
          controlsRow.appendChild(noteEl);
        }
        
        card.appendChild(controlsRow);
      }
    });

    // 2. Now scan the entire page to initialize all behaviors (including spinners)
    await WB.scan();

    // 2b. Effect demo click handlers
    document.querySelectorAll('.effect-demo').forEach(el => {
      el.addEventListener('click', async () => {
        const effect = el.dataset.effect;
        // Remove any existing animation class
        el.classList.remove('wb-animate-' + effect);
        // Force reflow
        void el.offsetWidth;
        // Add animation class
        el.classList.add('wb-animate-' + effect);
        // Remove after animation completes
        setTimeout(() => el.classList.remove('wb-animate-' + effect), 1000);
      });
    });

    // 3. Dark Mode Switch Logic
    const darkModeSwitch = document.getElementById('demo-dark-mode-switch');
    if (darkModeSwitch) {
      darkModeSwitch.addEventListener('change', (e) => {
        document.documentElement.setAttribute('data-theme', e.target.checked ? 'dark' : 'light');
      });
    }

    // 4. Notifications Switch Logic
    const notifySwitch = document.getElementById('demo-notifications-switch');
    const messages = [
      "New message from Alice",
      "Update installed successfully",
      "Meeting starts in 5 minutes",
      "File uploaded",
      "Battery low",
      "Weather alert: Rain expected",
      "Backup completed",
      "Connection restored",
      "New friend request",
      "Payment received"
    ];
    
    if (notifySwitch) {
      notifySwitch.addEventListener('change', (e) => {
        if (e.target.checked) {
          const msg = messages[Math.floor(Math.random() * messages.length)];
          createToast(msg, 'info');
        }
      });
    }

    // 5. Animated Progress Bars with Timers
    function animateProgress(elementId, duration, resetDelay, label) {
      const el = document.getElementById(elementId);
      if (!el) return;
      
      let value = 0;
      const step = 100 / (duration / 50); // 50ms intervals
      
      const interval = setInterval(() => {
        value += step;
        if (value >= 100) {
          value = 100;
          el.setAttribute('data-value', '100');
          el.setAttribute('data-label', `${label} Complete!`);
          
          // Reset after delay
          setTimeout(() => {
            value = 0;
            el.setAttribute('data-value', '0');
            el.setAttribute('data-label', label);
            
            // Re-trigger animation
            setTimeout(() => animateProgress(elementId, duration, resetDelay, label), 100);
          }, resetDelay);
          
          clearInterval(interval);
        } else {
          el.setAttribute('data-value', Math.round(value).toString());
          el.setAttribute('data-label', `${label} ${Math.round(value)}%`);
        }
        
        // Trigger re-render by re-scanning just this element
        if (el._wbProgressbar) {
          el._wbProgressbar.update();
        }
      }, 50);
    }

    // Start progress animations
    setTimeout(() => {
      animateProgress('progress-uploading', 8000, 2000, 'Uploading...');
      animateProgress('progress-processing', 5000, 1500, 'Processing');
    }, 500);

    // 6. Resizable columns functionality
    const resizeHandle = document.getElementById('resize-handle');
    const columnLeft = document.getElementById('column-left');
    const columnRight = document.getElementById('column-right');
    const container = document.querySelector('.resizable-container');
    
    let isResizing = false;
    
    resizeHandle.addEventListener('mousedown', (e) => {
      isResizing = true;
      resizeHandle.classList.add('dragging');
      document.body.style.cursor = 'col-resize';
      document.body.style.userSelect = 'none';
    });
    
    document.addEventListener('mousemove', (e) => {
      if (!isResizing) return;
      
      const containerRect = container.getBoundingClientRect();
      const newLeftWidth = e.clientX - containerRect.left;
      const containerWidth = containerRect.width;
      const handleWidth = 8;
      
      // Constrain to min/max widths
      const minWidth = 300;
      const maxWidth = containerWidth - minWidth - handleWidth;
      
      if (newLeftWidth >= minWidth && newLeftWidth <= maxWidth) {
        const leftPercent = (newLeftWidth / containerWidth) * 100;
        const rightPercent = 100 - leftPercent - (handleWidth / containerWidth * 100);
        
        columnLeft.style.flex = 'none';
        columnRight.style.flex = 'none';
        columnLeft.style.width = `${leftPercent}%`;
        columnRight.style.width = `${rightPercent}%`;
      }
    });
    
    document.addEventListener('mouseup', () => {
      if (isResizing) {
        isResizing = false;
        resizeHandle.classList.remove('dragging');
        document.body.style.cursor = '';
        document.body.style.userSelect = '';
      }
    });
  </script>
</body>
</html>